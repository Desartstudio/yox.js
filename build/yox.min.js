function Yox(a,b){this.container=a;this.options=b||{};this.init()}
Yox.prototype={init:function(){if(this.options.theme){var a=yox.themes[this.options.theme],b;this.options.data&&(b=new yox.data(this.options.data));if(!a)throw Error("Invalid theme, '"+this.options.theme+"' does not exist.");a=new a(b,this.options);if(!(a instanceof yox.theme))throw Error("Invalid theme, '"+this.options.theme+"' is not an instance of yox.theme.");a.init(this.container,b,this.options);$.extend(this,{destroy:a.destroy.bind(a),modules:a.modules})}delete this.init}};
yox="undefined"===typeof yox?{}:yox;$.fn.yox=function(a){return!this.length?this:this.each(function(b,c){var e=$(this).data("yox");if("string"===typeof a&&e)if(e&&e[a])e[a].apply(e,Array.prototype.slice.call(arguments,1));else throw Error("Invalid method '"+a+"'");else Object(a)===a||!a?$(this).data("yox",new Yox(this,a)):$.error("Method "+a+" does not exist on Yox.")})};
yox.utils={browser:{getCssPrefix:function(){if(arguments.callee.cache)return arguments.callee.cache;var a="-"+yox.utils.browser.getPrefix().toLowerCase()+"-";return this.cache=a},getPlatform:function(){if(arguments.callee.platform)return arguments.callee.platform;arguments.callee.platform=/(Android)|(iPhone)|(iPod)/.test(navigator.userAgent)||4E5>screen.width*screen.height?this.platforms.mobile:this.platforms.desktop;return arguments.callee.platform},getPrefix:function(){if(arguments.callee.cache)return arguments.callee.cache;
for(var a=["Moz","Webkit","O","ms"],b=document.createElement("div"),c,e,d,f=0;f<a.length&&!d;f++)e=a[f],c=e+"Transform",c in b.style&&(d=e);return arguments.callee.cache=d},platforms:{desktop:"desktop",mobile:"mobile"}},css:{addJqueryCssHook:function(a){if("undefined"===typeof jQuery)return!1;var b=yox.utils.css.getSupportedProperty(a);b&&b!==a&&(jQuery.cssHooks[a]={get:function(a){return $.css(a,b)},set:function(a,e){a.style[b]=e}});return!0},addJqueryCssHooks:function(a){for(var b=a.length;b--;)yox.utils.css.addJqueryCssHook(a[b])},
getSupportedProperty:function(a){var b,c;b=a.charAt(0).toUpperCase()+a.slice(1);var e=yox.utils.browser.getPrefix(),d=document.createElement("div");a in d.style?c=a:(b=e+b,b in d.style&&(c=b));return $.support[a]=c}},dom:{isElement:Object(HTMLElement)===HTMLElement?function(a){return a instanceof HTMLElement}:Object(Element)===Element?function(a){return a instanceof Element}:function(){return Object(el)===el&&1===el.nodeType&&"string"===typeof el.nodeName}},dimensions:{distributeMeasures:function(a){var b=
{top:0,bottom:0,left:0,right:0};if(a){var c="number"===typeof a,e;for(e in b)b[e]=c?a:a[e]||0}b.horizontal=b.left+b.right;b.vertical=b.top+b.bottom;return b},resize:{fill:function(a,b,c){c=c||{};a.ratio=a.ratio||a.height/a.width;var e=c.enlarge?b.width:Math.min(a.width,b.width),d=Math.round(e*a.ratio),f=b.height;if(d<f&&(f<=a.height||c.enlarge))d=f,e=Math.round(d/a.ratio);return{left:Math.round((b.width-e)/2),top:Math.round((b.height-d)/2),width:Math.round(e),height:Math.round(d)}},fit:function(a,
b,c){c=c||{};a.ratio=a.ratio||a.height/a.width;var e=c.margin||{},d=c.padding||{},f=b.width-(e.horizontal||0)-(d.horizontal||0),c=c.enlarge?f:Math.min(a.width,f),f=Math.round(c*a.ratio),g=b.height-(e.vertical||0)-(d.vertical||0);f>g&&(f=g,c=Math.round(f/a.ratio));return{left:(b.width-(e.left||0)-(e.right||0)-c)/2+(e.left||0)-(d.left||0),top:(b.height-(e.top||0)-(e.bottom||0)-f)/2+(e.top||0)-(d.top||0),width:c,height:f}}}}};
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,e=function(){},d=function(){return c.apply(this instanceof e?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;d.prototype=new e;return d});
yox.eventsHandler=function(){var a={_default:{}};this.triggerEvent=function(b,c,e){var d=b.split("."),b=d[0];if(d=d[1])if(d=a[d]){var f=d[b];if(f)for(var d=0,g;g=f[d];d++)g.call(this,c,e)}if(b=a._default[b])for(d=0;g=b[d];d++)g.call(this,c,e)};this.addEventListener=function(b,c){var e=b.split("."),d=e[0],f=e[1];f?(e=a[f])||(e=a[f]={}):e=a._default;(f=e[d])||(f=e[d]=[]);f.push(c)}};
yox.data=function(a){this.data=[];this.options=$.extend(!0,{},this.defaults,a);a=this.options.eventsHandler||new yox.eventsHandler;$.extend(this,a);if(this.options.events)for(var b in this.options.events)this.addEventListener(b,this.options.events[b]);this.options.source&&this.addSources(this.options.source)};
yox.data.prototype={defaults:{cache:!1},addSources:function(a){var b=[],c=a instanceof Array?a:arguments,e=this;this.triggerEvent("loadSourcesStart",c);for(var d=0;d<c.length;d++){var f=this.loadSource(c[d]);f&&b.push(f)}$.when.apply(this,b).done(function(){for(var a=0;a<arguments.length;a++)e.data.push(arguments[a]);e.triggerEvent("loadSources",Array.prototype.slice.call(arguments,0))})},clear:function(){this.triggerEvent("removeSources",this.data);this.triggerEvent("clear");data=[]},findDataSource:function(a){for(var b in yox.data.sources){var c=
yox.data.sources[b];if(c.match(a))return c}},getData:function(){return this.data},getDataSource:function(a){return yox.data.sources[a]},loadSource:function(a){var b=a.type?this.getDataSource(a.type):this.findDataSource(a),c=this;if(b){var e=$.Deferred(),d=function(b){c.store(a,b);e.resolve(b)},f=this.store(a);f?d(f):b.load(a,d,function(){e.reject()});return e}},removeEventListener:function(a,b){if(b&&"function"!==typeof b)throw Error("Invalid event handler, must be a function or undefined.");this.$eventsElement.off(a+
"."+this.namespace,b)},source:function(a){this.clear();this.addSources.apply(this,arguments)},store:function(a,b){if(!this.options.cache||!window.localStorage||!a.url)return!1;var c=this.namespace+".source."+a.url;if(!b)return(c=window.localStorage.getItem(c))?JSON.parse(c):null;window.localStorage.setItem(c,JSON.stringify(b))}};yox.data.source=function(){};yox.data.sources={};
yox.data.source.prototype={load:function(){throw Error("'load' function isn't implemented for this data source.");},match:function(){throw Error("'match' function isn't implemented for this data source.");}};
yox.data.sources.element=function(){var a=Object(HTMLElement)===HTMLElement?function(a){return a instanceof HTMLElement}:Object(Element)===Element?function(a){return a instanceof Element}:function(){return Object(el)===el&&1===el.nodeType&&"string"===typeof el.nodeName};return{name:"element",match:function(b){return a(b)||b instanceof jQuery||b.element&&a(b.element)||b.element instanceof jQuery},load:function(a,c){var e=[];$("a:has('img')",a instanceof HTMLElement?a:a.element).each(function(){var a=
$("img:first",this)[0];e.push({thumbnail:{element:this,image:a,src:a.src},url:this.href,title:this.title||a.title,type:"image"})});var d={items:e,source:a,sourceType:"element",createThumbnails:!1};c&&c(d);return d}}}();
yox.data.sources.files=function(){var a;a=window.URL&&window.URL.createObjectURL?function(a){return window.URL.createObjectURL(a)}:window.webkitURL&&window.webkitURL.createObjectURL?function(a){return window.webkitURL.createObjectURL(a)}:function(){return null};return{name:"files",match:function(){return!1},load:function(b,c){if(!c)return!1;for(var e=[],d=0,f;f=b.files[d];d++)if(/^image\//.test(f.type)){var g=a(f);e.push({url:g,type:"image",title:f.name||f.fileName,thumbnail:{src:g}})}c({items:e,
source:b,sourceType:"files",createThumbnails:!0})}}}();
yox.data.sources.html=function(){return{name:"html",match:function(a){return yox.utils.dom.isElement(a)||a instanceof jQuery||a.element&&yox.utils.dom.isElement(a.element)||a.element instanceof jQuery},load:function(a,b){var c=[];if(a.selector&&a.element)for(var e=a.element.querySelectorAll(a.selector),d=0,f=e.length;d<f;d++){var g=e[d];c.push({element:g,type:"html",title:g.title||g.getAttribute("data-title"),width:g.clientWidth,height:g.clientHeight,thumbnail:{src:g.getAttribute("data-thumbnail"),
className:a.thumbnailsClass||"yox-thumbnail"}});g.parentNode.removeChild(g)}b({items:c,source:a,sourceType:"html",createThumbnails:!0})}}}();
yox.data.sources.picasa=function(){function a(a,c){var d=a.match(f),e=$.extend({},h,c);d&&1<d.length&&(e.user=d[1],d[2]?(e.album=d[2],e.fields+=",entry(summary),gphoto:name"):e.fields+=",entry(title),entry(gphoto:numphotos),entry(gphoto:name),entry(link[@rel='alternate']),author,entry(summary)");e.imgmax=b(m,e.imgmax);e.thumbsize=b(e.cropThumbnails?l:m,e.thumbsize)+(e.cropThumbnails?"c":"u");return e}function b(a,b){for(var c=Math.min(b,Math.max(screen.width,screen.height)),d=a.length,e;d-- -1&&(e=
a[d])&&a[d-1]>=c;);return e}function c(a){var b=g;a.user&&"lh"!=a.user?(b+="user/"+a.user,a.album&&(b+="/album/"+a.album)):b+="all";return b}function e(a){var b=[];jQuery.each(a.feed.entry,function(a,c){var d="album"===c.category[0].term.match(/#(.*)$/)[1];if(d&&!c.gphoto$numphotos.$t)return!0;var e=c.media$group.media$content[0],f={thumbnail:{src:c.media$group.media$thumbnail[0].url},url:e.url,link:c.link[0].href,title:d?c.title.$t:c.summary.$t,type:"image"};d?(f.data={album:{name:c.title.$t,imageCount:c.gphoto$numphotos.$t,
description:c.summary.$t}},f.isLoaded=!0):$.extend(f,{width:e.width,height:e.height,ratio:e.height/e.width});b.push(f)});return b}var d=/^https?:\/\/picasaweb\.google\./,f=/https?:\/\/picasaweb\.google\.\w+\/([^\/#\?]+)\/?([^\/#\?]+)?(\?([^#]*))?/,g="http://picasaweb.google.com/data/feed/api/",l=[32,48,64,72,104,144,150,160],m=[94,110,128,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600].concat(l).sort(function(a,b){return a-b}),h={setThumbnail:!0,setSingleAlbumThumbnails:!0,setTitle:!0,
alt:"json",cropThumbnails:!1,thumbsize:64,imgmax:m[m.length-1],fields:"category(@term),entry(category(@term)),title,entry(summary),entry(media:group(media:thumbnail(@url))),entry(media:group(media:content(@url))),entry(media:group(media:content(@width))),entry(media:group(media:content(@height))),entry(link[@rel='alternate'](@href))"};return{name:"picasa",match:function(a){return a.url&&d.test(a.url)},load:function(b,d){var f=a(b.url,b);$.ajax({url:c(f),dataType:"jsonp",data:f,success:function(a){var c=
{source:b,sourceType:"picasa"};if(!a.feed.entry||0==a.feed.entry.length)c.items=[];else{var f=a.feed.category[0].term.match(/#(.*)$/)[1];"user"===f&&$.extend(c,{title:a.feed.title.$t,data:{kind:"user",author:{name:a.feed.author[0].name.$t,link:a.feed.author[0].uri.$t}}});c.createThumbnails=!0;c.items=e(a,f)}d&&d(c)},error:function(a,b){console.log("error: ",arguments)}})}}}();
(function(a){a.fn.yoxscroll=function(b){if(0!=this.length){var c=a(this),e=c.data("yoxscroll");if("string"===typeof b&&e&&e[b])return e[b].apply(e,Array.prototype.slice.call(arguments,1));"object"===typeof b||!b?c.data("yoxscroll",new yox.scroll(this,b)):a.error("Method "+b+" does not exist on yox.scroll.")}return this};yox.scroll=function(a,c){this.container=a;this.init(c)};yox.scroll.prototype=function(){var b,c,e;function d(b,c,d){a(b);var e=b.getElementsByTagName("img"),f=e.length,k=new Date;
if(f){var i=0,h=function(a){d&&d.call(this,a);if((a instanceof Date||"IMG"===a.target.nodeName)&&++i===f)b.removeEventListener("load",h,!0),c&&c(f)},n=function(a){d&&d.call(this,a);++i===f&&c&&c(f);a.srcElement.detachEvent("onload",n)};if(b.addEventListener)b.addEventListener("load",h,!0);else if(b.attachEvent)for(var g=f;g--;)e[g].attachEvent("onload",n);for(g=f;g--;)e[g].complete&&h(k)}else c&&c(0)}function f(){return/(Android)|(iPhone)|(iPod)/.test(navigator.userAgent)||4E5>screen.width*screen.height}
function g(b,c){var d=a(b).data("yoxscroll-"+c);if(d){var d=d.split("-"),e=this[d.shift()];e&&e.apply(this,d)}}function l(){p=u;q=parseInt(this.elements.$slider.css("left"),10)}function m(a,b,c){var d=(a.timeStamp||new Date)-z;if(!d)return!1;C=d;z=a.timeStamp||new Date;r=a.pageX-u;u=a.pageX;this.enableDrag&&(a=q+u-p,d=Math.abs(r)/r,a>=c&&0>=a?b.css("left",a):((!r||d!==v)&&l.call(y),a<c&&s!==c?b.css("left",a=c):0<a&&0!==s&&b.css("left",a=0)),x=!0,v=d,s=a)}function h(a,b,c){var d=this.elements.$slider;
s=c?parseInt(d.css("left"),10):s;var c=s+b*v,e=0<c?(b-c)/b:c<this.minPosition?(b-this.minPosition+c)/b:1;0!==e&&(c=s+e*b*v,a*=e,b=E.getCubicBezier(e),d.css({transition:"left "+a+"s cubic-bezier("+b+")",left:c}))}function k(a){y.elements.$window.off(b,D);currentDirection=0;a.data.view.elements.$window.off(c,k);if(a.data.view.enableDrag&&0!==r){var d=Math.min(Math.abs(r)/(7*C),0.86),e=d*A,d=Math.round(1E3*d*d*A);h.call(a.data.view,e,d);x=!1;y=null}return!1}function i(d){var i=this;d.on(e,function(e){var h=
f?window.event.touches[0]:e;e.preventDefault();u=h.pageX;z=h.timeStamp||new Date;l.call(i,e);i.enableDrag&&d.css({transition:"none",left:d.css("left")});r=0;x=!1;y=i;a(window).on(b,{$slider:d,minPosition:i.minPosition,view:i},D).on(c,{view:i},k)}).on(c,function(a){a.preventDefault();var b=u,b=b>p-4&&b<p+4;(i.enableDrag&&!x||b)&&i.triggerEvent("click",a)})}var n={centerContentsIfNotScrollable:!0,events:{buttonholdstart:function(a){g.call(this,a,"holdstart")},buttonholdend:function(){this.stopScroll()},
buttonclick:function(a){g.call(this,a,"click")}},"float":"left",isHorizontal:!0,scrollByTime:0.5,scrollToEasing:"ease-in-out",scrollToElementTime:0.2,scrollVelocity:500,toggleButtons:!0},o=a(window),p,q,x=!1,v=0,s,y,u,r=0,z,C,A=2.5,f=f();b=f?"touchmove":"mousemove";e=f?"touchstart":"mousedown";c=f?"touchend":"mouseup";var w,B,t={buttonDown:function(b){b.preventDefault();var d=this,e=b.data.view.options.pressedButtonClass;e&&a(d).addClass(e);w=setTimeout(function(){o.on(c,b.data,t.holdEnd);if(!f)o.on("mouseout",
b.data,t.mouseOut);b.data.view.triggerEvent("buttonholdstart",d);w=null;B=d},200)},buttonUp:function(b){var c=b.data.view.options.pressedButtonClass;c&&a(this).removeClass(c);w&&(clearTimeout(w),b.data.view.triggerEvent("buttonclick",this),w=null)},holdEnd:function(a){o.off(c,t.holdEnd);f||o.off("mouseout",t.mouseOut);a.data.view.triggerEvent("buttonholdend",B);B=null;return!1},mouseOut:function(a){a.relatedTarget||t.holdEnd(a)}},E=function(){function a(b,c){this.x=b;this.y=c}var b=[0,0.42,0.36,1],
c=[new a(0,0),new a(b[0],b[1]),new a(b[2],b[3]),new a(1,1)],d=b.join(", ");return{getCubicBezier:function(b){if(b)return d;for(var e=[c,[],[],[]],f=[c[0]],k=1;3>=k;k++)for(j=0;j<=3-k;j++){var i=new a(Math.abs(b-1)*e[k-1][j].x+b*e[k-1][j+1].x,Math.abs(b-1)*e[k-1][j].y+b*e[k-1][j+1].y);e[k][j]=i;j||f.push(i)}b=f[3];for(k=1;4>k;k++)i=f[k],i.x/=b.x,i.y/=b.y;return[f[1].x,f[1].y,f[2].x,f[2].y].join(", ")}}}(),D=f?function(a){m.call(a.data.view,window.event.touches[0],a.data.$slider,a.data.minPosition)}:
function(a){m.call(a.data.view,a,a.data.$slider,a.data.minPosition)};return{calculateSliderSize:function(){this.elements.$slider[this.options.isHorizontal?"width":"height"](999999);var b=a("<span>").appendTo(this.elements.$slider),c=b.position().left;c||(b.css("float",this.options["float"]),c=b.position().left);b.remove();return c},init:function(b){var c=a.extend({},b),b=c.eventsHandler||new yox.eventsHandler;a.extend(this,b);b=a.extend({},c.events);delete c.events;c=a.extend(!0,{},n,c);c.toggleButtons&&
(c.events.changeStatus=function(a){this.options.elements.toggle(a.scrollEnabled)});for(var d in b){var e=c.events[d],f=b[d];e?e instanceof Array||(e=c.events[d]=[e]):e=c.events[d]=[];f instanceof Array?e=e.concat(f):"function"===typeof f&&e.push(f)}this.options=c;d=this.elements={$window:a(window),$container:a(this.container),$slider:a("<div>",{"class":"yoxscrollSlider",css:a.extend({position:"relative",top:0,left:0},c.isHorizontal?{height:"100%"}:{width:"100%"})})};a.browser.webkit&&d.$slider[0].style.setProperty("-webkit-transform",
"translateZ(0)",null);b=d.$container;"static"===b.css("position")&&b.css("position","relative");b.children().appendTo(d.$slider);d.$slider.appendTo(d.$container);this.initEvents();this.update();this.initButtons();i.call(this,d.$slider);d.$slider.on("click",function(a){a.preventDefault()})},initButtons:function(){if(!this.options.elements)return!1;if(this.options.elements instanceof jQuery)this.options.elements.on(e,{view:this},t.buttonDown).on(c,{view:this},t.buttonUp)},initEvents:function(){for(var a in this.options.events){var b=
this.options.events[a];if(b instanceof Array)for(var c=0;c<b.length;c++)this.addEventListener(a,b[c]);else this.addEventListener(a,b)}},page:function(a){this.scrollBy(("left"===a?1:-1)*this.containerSize)},scroll:function(a){v="left"===a?1:-1;this.scrollTo(1===v?0:this.minPosition,{easing:"cubic-bezier(.15, .03, .15, .16)"})},scrollBy:function(a){this.scrollTo(a,{isRelative:!0,time:this.options.scrollByTime})},scrollTo:function(b,c){var c=c||{},d=this.elements.$slider,e=parseInt(d.css("left"),10),
f=b instanceof jQuery,k=f?b:void 0,i=c.time;b instanceof HTMLElement&&(k=a(b),f=!0);if(f){f=k.position().left;k=k.width();if(c.centerElement)b=(this.containerSize-k)/2-f;else{var h=f+e;if(h+k>this.containerSize)b=this.containerSize-f-k;else if(0>h)b=-1*f;else return!1}i=i||this.options.scrollToElementTime}c.isRelative&&(b+=e);b=Math.min(Math.max(b,this.minPosition),0);void 0===i&&(i=Math.abs(b-e)/this.options.scrollVelocity);0===b&&!1!==c.allowCenter&&this.options.centerContentsIfNotScrollable&&!this.enableDrag?
this.elements.$slider.css({transition:"none",left:this.minPosition/2}):d.css("transition","left "+i+"s "+(c.easing||this.options.scrollToEasing)).css("left",b)},stopScroll:function(){var a=this.options.scrollVelocity/20/A;h.call(this,a/10,0,!0)},update:function(){var a=this;this.elements.$container.children(":not(.yoxscrollSlider)").appendTo(this.elements.$slider);d(this.elements.$container[0],void 0,function(){var b=a.calculateSliderSize();a.elements.$slider.width(b);a.containerSize=a.elements.$container.width();
a.minPosition=a.containerSize-b;b=0>a.minPosition;b!==a.enableDrag&&(a.enableDrag=b,(!b&&!a.options.centerContentsIfNotScrollable||0<parseInt(b&&a.elements.$slider.css("left"),10))&&a.elements.$slider.css({transition:"none",left:0}),a.triggerEvent("changeStatus",{scrollEnabled:b}));a.options.centerContentsIfNotScrollable&&!b&&a.elements.$slider.css({transition:"none",left:a.minPosition/2})})}}}()})(jQuery);
(function(a,b){yox.thumbnails=function(b,e){var d=this;this.container=b instanceof jQuery?b[0]:b;this.options=a.extend(!0,{},this.defaults,e);this.itemCount=0;var f=this.options.eventsHandler||new yox.eventsHandler;a.extend(this,f);if(this.options.events)for(var g in this.options.events)this.addEventListener(g,this.options.events[g]);this.options.data&&this.addDataSources(this.options.data);if(!1!==this.options.handleClick)a(this.container).on("click","."+d.options.thumbnailClass,function(a){var b=
this.getAttribute("data-yoxthumbIndex");a.preventDefault();d.triggerEvent("click",{originalEvent:a,index:b,target:this});d.select(b)})};yox.thumbnails.prototype={addDataSources:function(a){function b(a){for(var c=0;c<a.length;c++)d.createThumbnails(a[c])}var d=this,f=a.getData();f&&f.length&&b(f);a.addEventListener("loadSources",function(a){d.options.allowAppend||(d.clear(),this.itemCount=0);b(a)});a.addEventListener("clear",function(){d.clear();this.itemCount=0})},clear:function(){this.thumbnails&&
this.thumbnails.remove();this.itemCount=0;this.currentSelectedThumbnail=null},createThumbnail:function(c){var e=a("<a>",{href:c.link||c.url,title:!1!==this.options.renderThumbnailsTitle?c.title:b,"class":this.options.thumbnailClass});e.append(a("<img>",{src:this.options.useFullImages?c.url:c.thumbnail.src,alt:c.title}));return e[0]},createThumbnails:function(b){var e=this,d;this.thumbnails=this.thumbnails||a();if(!1!==b.createThumbnails){if(a.tmpl)d=a.tmpl(a.template(this.template),b.items,{options:this.options,
getIndex:function(){return e.itemCount++}}),d.appendTo(this.container),this.thumbnails=d;else{d=document.createDocumentFragment();for(var f=0,g=b.items.length;f<g;f++,this.itemCount++){var l=b.items[f],m=this.createThumbnail(l);m.setAttribute("data-yoxthumbindex",this.itemCount);l.thumbnail.element=m;l.thumbnail.generated=!0;var h=m.getElementsByTagName("img");h.length&&(l.thumbnail.image=h[0]);d.appendChild(m)}this.container.appendChild(d);this.thumbnails=this.thumbnails.add(a(this.container).children("."+
this.options.thumbnailClass))}d=this.container.childNodes}else d=a("a:has(img)",this.container).attr("data-yoxthumbindex",function(){return e.itemCount++}),this.thumbnails=this.thumbnails.add(d),d=d.get();this.triggerEvent("create",{thumbnails:d,items:b.items})},defaults:{allowAppend:!0,renderThumbnailsTitle:!0,selectedThumbnailClass:"selectedThumbnail",thumbnailClass:"yoxthumbnail"},select:function(a){this.currentSelectedThumbnail&&this.currentSelectedThumbnail.removeClass(this.options.selectedThumbnailClass);
this.thumbnails&&(this.currentSelectedThumbnail=this.thumbnails.eq(a).addClass(this.options.selectedThumbnailClass))},template:"<a class='${$item.options.thumbnailClass}' href='${link || url}'{{if $item.options.renderThumbnailsTitle}} title='title'{{/if}} data-yoxthumbIndex='${$item.getIndex()}'><img src='${thumbnail.src}' alt='${title}' /></a>"};window.yox.thumbnails=yox.thumbnails})(jQuery);
(function(a){yox.utils.css.addJqueryCssHooks("transition,transitionDuration,transform,transformStyle,backfaceVisibility,perspective".split(","));yox.view=function(b,c,e){var d=a.extend({},c.events),f=yox.view.config,g=yox.view.config.platform[yox.utils.browser.getPlatform()],e=e||yox.view.cache;delete c.events;var c=a.extend(!0,{},f.mode[c.resizeMode||g.resizeMode||f.defaults.resizeMode],f.defaults,g,c),l;for(l in d)f=c.events[l],g=d[l],f?f instanceof Array||(f=c.events[l]=[f]):f=c.events[l]=[],g instanceof
Array?f.concat(g):"function"===typeof g&&f.push(g);this.container=b;this.$container=a(b);this.options=c;this.id=yox.view.id?++yox.view.id:1;this.cache=e;this.direction=1;for(var m in this)b=this[m],"function"===typeof b&&(this[m]=b.bind(this));this.init()};yox.view.prototype=function(){var b,c;function e(a){var b="string"===typeof a?yox.view.transitions[a]:a;if(!b)throw Error('Invalid transition - "'+a+"\" doesn't exist.");a=new b;if(!(a instanceof yox.view.transition))throw Error("Invalid transition - transition constructors must have yox.view.transition as prototype.");
a.create.call(this,this.$container);this.transition=a}function d(b){var c={};b.options.lightbox?(c.$background=a('<div class="yoxviewBackground"></div>').appendTo(document.body),c.$background.on("click",function(a){b.triggerEvent("backgroundClick",a)})):"static"===b.$container.css("position")&&b.$container.css("position","relative");a.extend(b,{getPosition:yox.utils.dimensions.resize[b.options.resizeMode],elements:c});e.call(b,b.options.transition)}function f(a,b){var c=a.data(b);c||((c=h[b].create.call(this))?
a.append(c):c=a[0],a.data(b,c),c!==a[0]&&(c.style.height=c.style.width="100%",c.style.display="none"));return c}function g(a){if(a!==this.currentItem)return!1;var b=h[a.type],c=b.checkLoading?this.transition.getCurrentPanel():this.transition.getPanel(),d=c.data("itemType"),e=f.call(this,c,a.type);d!==a.type&&(d&&(d&&b.clear.call(this,e),c.data(d).style.display="none"),c.data("itemType",a.type));b.checkLoading&&!e.loading&&(c=this.transition.getPanel(!0),e=f.call(this,c,a.type));e.style.display="block";
b.set.call(this,a,e)}var l={};b={40:"down",35:"end",13:"enter",36:"home",37:"left",39:"right",32:"space",38:"up",72:"h",27:"escape"};c=function(a){var c=a.data.view,d=c[c.options.keyPress[b[a.keyCode]]];return d?(a.preventDefault(),d.call(c),!1):!0};var m={resizeMode:function(a){this.getPosition=yox.utils.dimensions.resize[a]},transition:function(a){this.transition.destroy.call(this);e.call(this,a);a=this.currentItem.id-1;this.currentItem=null;this.selectItem(a)}},h={html:{clear:function(a){a.innerHTML=
""},create:function(){var a=document.createElement("div");a.style.overflow="hidden";return a},set:function(a,b){b.loading=!1;a.element?(b.innerHTML="",b.appendChild(a.element)):b.innerHTML=a.html;a.width||(a.width=this.containerDimensions.width);a.height||(a.height=this.containerDimensions.height);a.ratio=a.height/a.width;this.transition.transition.call(this,{position:this.getPosition(a,this.containerDimensions,this.options),index:a.id-1});this.triggerEvent("select",a)}},image:function(){function b(a){this.loading=
!1;a=a instanceof yox.view?a:a.data.view;if(a.currentItem.url!==this.src)return!1;var c=a.currentItem,d=a.getPosition(c,a.containerDimensions,a.options);a.transition.transition.call(a,{position:d,index:c.id-1});a.triggerEvent("select",c)}return{checkLoading:!0,clear:function(a){a.src=""},create:function(){var c=document.createElement("img");c.src="";a(c).on("load",{view:this},b);return c},set:function(a,c){c.loading=!0;c.src!==a.url?(c.src="",c.src=a.url):b.call(c,this)}}}()};return{addDataSource:function(a){if(l[a.name])return!1;
l[a.name]=a},addItems:function(a){if(!a)return!1;a instanceof Array||(a=[a]);this.triggerEvent("loadSources",{items:a})},addDataSources:function(a){var b=this,c=a.getData();c&&c.length&&b.triggerEvent("loadSources",c);a.addEventListener("loadSources",function(a){b.triggerEvent("loadSources",a)});a.addEventListener("clear",function(){b.removeItems()})},cacheCount:0,disableKeyboard:function(){a(document).off("keydown.modules",c)},enableKeyboard:function(){a(document).on("keydown.modules",{view:this},
c)},first:function(){if(!this.currentItem)return!1;this.selectItem(0)},items:[],init:function(){var b=this;this.options.margin=yox.utils.dimensions.distributeMeasures(this.options.margin);this.options.padding=yox.utils.dimensions.distributeMeasures(this.options.padding);var c=this.options.eventsHandler||new yox.eventsHandler;a.extend(this,c);for(var e in this.options.events)if(c=this.options.events[e],c instanceof Array)for(var f=0;f<c.length;f++)b.addEventListener(e,c[f]);else b.addEventListener(e,
c);this.options.data&&this.addDataSources(this.options.data);d(this);this.options.enableKeyboard&&this.enableKeyboard();if(this.options.controls)for(var h in this.options.controls)if(this[h])a(this.options.controls[h]).data("yoxviewControl",h).on("click",function(c){c.preventDefault();b[a(this).data("yoxviewControl")].call(b)});this.update();this.triggerEvent("create")},last:function(){if(!this.currentItem)return!1;this.selectItem(this.items.length-1)},next:function(a){if(!this.currentItem)return!1;
this.direction=1;this.selectItem(this.currentItem.id===this.items.length?0:this.currentItem.id,void 0,a)},option:function(b,c){var d;void 0===c&&Object(b)===b?d=b:(d={},d[b]=c);for(var e in d){var f=this.options[e],h=d[e];if(f!==h){var g=m[e];g&&g.call(this,h,f)}}this.transition.update&&this.transition.update.call(this,d);a.extend(!0,this.options,d)},toggleSlideshow:function(){var a=this;this.isPlaying?(clearTimeout(this.playTimeoutId),this.isPlaying=!1,this.triggerEvent("slideshowStop")):(this.isPlaying=
!0,this.playTimeoutId=setTimeout(function(){a.next.call(a,!0)},this.options.slideshowDelay),this.triggerEvent("slideshowStart"))},prev:function(){if(!this.currentItem)return!1;this.direction=-1;this.selectItem(1===this.currentItem.id?this.items.length-1:this.currentItem.id-2)},removeItems:function(){this.triggerEvent("removeItems",this.items);this.currentItem=void 0;this.items=[]},removeEventListener:function(b,c){if(c&&"function"!==typeof c)throw Error("Invalid event handler, must be a function or undefined.");
a(this.container).off(b+".modules",c)},selectItem:function(b,c,d){!d&&this.isPlaying?this.toggleSlideshow():d&&!this.isPlaying&&(this.isPlaying=!0,this.triggerEvent("slideshowStart"));if(isNaN(b))b instanceof HTMLElement&&(b=a(b)),b instanceof jQuery&&(d=b.data("yoxviewIndex"),isNaN(d)&&(d=parseInt(b.attr("data-yoxviewIndex"),10)),b=this.items[d]);else{if(b>=this.items.length||0>b)throw Error("Invalid item index: "+b);b=this.items[b]}var d=this.currentItem,e=this;if(d&&b.id===d.id)return!1;this.triggerEvent("beforeSelect",
{newItem:b,oldItem:d,data:c});this.currentItem=b;this.cache.withItem(b,this,function(a){g.call(e,a)})},unload:function(){},update:function(a){this.options.transitionTime&&this.updateTransitionTimeoutId&&(clearTimeout(this.updateTransitionTimeoutId),this.updateTransitionTimeoutId=null);var b={width:this.$container.width(),height:this.$container.height()};if(a||!this.containerDimensions||b.width!==this.containerDimensions.width||b.height!==this.containerDimensions.height)this.containerDimensions=b,
this.currentItem&&this.transition.transition.call(this,{position:this.getPosition(this.currentItem,this.containerDimensions,this.options),duration:0,isUpdate:!0})}}}();yox.view.config={defaults:{cacheImagesInBackground:!0,enableKeyPresses:!0,enlarge:!1,keyPress:{left:"prev",right:"next",up:"prev",down:"next",escape:"close",home:"first",end:"last",enter:"toggleSlideshow"},events:{init:function(){this.options.cacheImagesInBackground&&this.items.length&&yox.view.cache.cacheItem(this);this.removeEventListener("init")},
loadSources:function(a){for(var c=[],e=this.items.length,d=0;d<a.length;d++){var f=a[d];this.items=this.items.concat(f.items);c=c.concat(f.items)}d=e;for(e=this.items.length;d<e;d++)this.items[d].id=d+1;this.triggerEvent("load",{items:c,sources:a});this.initialized||(this.initialized=!0,this.triggerEvent("init"))},select:function(){var a=this;this.isPlaying&&(this.playTimeoutId=setTimeout(function(){a.next.call(a,!0)},Number(this.options.slideshowDelay)+Number(this.options.transitionTime||0)))}},
container:document.body||document.getElementsByTagName("body")[0],lightbox:!1,panelDimensions:{width:1600,height:1600},resizeMode:"fit",slideshowDelay:3E3,storeDataSources:!1},mode:{fill:{transition:"fade",enlarge:!0,margin:0,padding:0},fit:{transition:"morph"}},platform:{mobile:{cacheBuffer:2,margin:0,padding:0,showInfo:!0,transitionTime:0},desktop:{cacheBuffer:5,margin:20,padding:0,showInfo:!0,transitionTime:300}}}})(jQuery);
yox.view.cache=function(){function a(a,b){var d=!0;f++;b&&++a.cacheCount===a.items.length&&(delete a.cacheCount,a.isLoaded=!0,d=!1);d&&(d=f+k<a.options.cacheBuffer);d&&c(a)}function b(b){if(!this.width||!this.height)return!1;var b=l[m=b.data.cacheImageIndex],c=b.item,d=b.view;c.width=this.width;c.height=this.height;c.ratio=this.height/this.width;c.isLoaded=!0;c.id===n&&(d.triggerEvent("cacheEnd",c),n=null);d.triggerEvent("loadItem",c);b.onCache&&(b.onCache.call(d,c),b.onCache=null);k--;delete b.item;
a(d,!0)}function c(a){var b=a.items.length,c=d+a.direction;c===b?c=0:-1===c&&(c+=b);e(a,a.items[c],null,h)}function e(b,e,i){if(!(b instanceof yox.view))throw new TypeError("Invalid view for cacheItem.");if(!b)throw Error("View is required for cacheItem.");if(4>arguments.length||arguments[3]!==h)f=0;e=e||b.items[0];if("image"!==e.type)return i&&i.call(b,e),!0;for(var n=0;n<g;n++){var o=l[n];if(o.view&&o.view.id===b.id&&o.item&&o.item.id===e.id&&i)return o.onCache=i,!0}d=e.id-1;!e.isLoaded&&"image"===
e.type?(o=l[m],o.item=e,o.view=b,$.browser.mozilla&&(o.img.src=""),i&&(o.onCache=i),o.img.src=e.url,k++,++m===l.length&&(m=0),k<g&&f+k<b.options.cacheBuffer&&c(b)):(a(b,!e.isLoaded),e.isLoaded=!0,i&&i.call(b,e));return!0}for(var d,f=0,g=2,l=[],m=0,h=(new Date).valueOf(),k=0,i,n,o=0;o<g;o++){var p=new Image;p.setAttribute("data-id",o);$(p).on("load",{cacheImageIndex:o},b).on("error",function(){console.error("Image not found or couldn't load:",this.src)});l.push({img:p})}return{cacheItem:e,withItem:function(b,
c,g){if(3>arguments.length||arguments[2]!==h)f=0;b.isLoaded?(g.call(c,b),n&&(c.triggerEvent("cacheEnd",b),n=null),d=b.id-1,c.isLoaded||a(c,!1)):(i&&clearTimeout(i),i=setTimeout(function(){b.isLoaded||(i=null,c.triggerEvent("cacheStart",b),n=b.id)},200),e(c,b,g,h))}}}();yox.view.transition=function(){};yox.view.transitions={};
yox.view.transition.prototype={create:function(){throw Error("'create' method isn't implemented for this transition type.");},destroy:function(){throw Error("'destroy' method isn't implemented for this transition type.");},getCurrentPanel:function(){throw Error("'getCurrentPanel' method isn't implemented for this transition type.");},getPanel:function(){throw Error("'getPanel' method isn't implemented for this transition type.");},transition:function(){throw Error("'transition' method isn't implemented for this transition type.");
},update:function(){}};
yox.view.transitions.evaporate=function(){function a(a){e=a;d=a+"ms";l=yox.utils.browser.getCssPrefix()+"transform "+d+" ease-out, opacity "+d+" ease-out"}var b,c=1,e,d,f=0,g=this,l,m;this.create=function(c){g.$container=c;c.css("perspective","800px");a(this.options.transitionTime);b=[];for(var d=0;2>d;d++){var e=$("<div>",{"class":"yoxviewImg"});e.css({position:"absolute",top:"50%",left:"50%",width:0,height:0,border:"solid 1px #666",transform:d?"translateZ(-500px)":"translateZ(0)"});e.attr("data-index",
d);b.push(e.appendTo(c))}};this.destroy=function(){g.$container.css("perspective","");for(var a=0;a<b.length;a++)b[a].remove()};this.getCurrentPanel=function(){return b[c]};this.getPanel=function(){c=c?0:1;return b[c]};this.transition=function(a){clearTimeout(m);var d=g.getCurrentPanel(),i=b[c?0:1].show(),n=a.index<f&&!(f===this.items.length-1&&0===a.index)||a.index===this.items.length-1&&!f;d.css($.extend(a.position,{display:"block",transform:n?"translateZ(500px)":"translateZ(-800px)",transition:"none",
zIndex:n?3:1}));setTimeout(function(){i.css({transform:n?"translateZ(-800px)":"translateZ(500px)",opacity:0,zIndex:n?1:3});d.css({transition:l,transform:"translateZ(0)",zIndex:2,opacity:1});f=a.index;n||(m=setTimeout(function(){i.hide()},e))},10)};this.update=function(c){if(void 0!==c.transitionTime){a(c.transitionTime);for(c=b.length;c--;)b[c].css("transitionDuration",d)}}};yox.view.transitions.evaporate.prototype=new yox.view.transition;
yox.view.transitions.fade=function(){var a,b=1;this.create=function(b){a=[];for(var e=0;2>e;e++){var d=$("<div>",{src:"","class":"yoxviewImg"});0<e&&d.css({opacity:"0"});d.css({transition:["opacity ",this.options.transitionTime,"ms linear"].join("")});$.browser.webkit&&d[0].style.setProperty("-webkit-transform","translateZ(0)");a.push(d.appendTo(b))}};this.destroy=function(){for(var b=0;b<a.length;b++)a[b].remove()};this.getCurrentPanel=function(){return a[b]};this.getPanel=function(){b=b?0:1;return a[b]};
this.transition=function(c){if(void 0!==c.duration){if(isNaN(c.duration))throw new TypeError("Invalid value for transition time, must be a number (in milliseconds).");}else c.duration=void 0;a[b].css(c.position);this.options.enlarge&&"fill"===this.options.resizeMode?a[1].css({opacity:b}):(a[b?0:1].css({opacity:0}),a[b].css({opacity:1}))};this.update=function(b){b.resizeMode&&b.resizeMode!==this.options.resizeMode&&this.options.enlarge&&"fill"===b.resizeMode&&a[0].css({opacity:1});if(void 0!==b.transitionTime)for(var e=
a.length;e--;)a[e].css("transitionDuration",b.transitionTime+"ms")}};yox.view.transitions.fade.prototype=new yox.view.transition;
yox.view.transitions.flip=function(){var a,b,c=1,e,d=-180,f=0,g=this;this.create=function(c){g.$container=c;c.css("perspective","800px");a=$("<div>",{"class":"yoxviewFrame yoxviewFrame_"+this.options.resizeMode+" yoxviewFrame_"+yox.utils.browser.getPlatform()+" yoxviewFrame_flip"}).appendTo(c);this.options.transitionTime&&(e=this.options.transitionTime,a.css({transition:yox.utils.browser.getCssPrefix()+"transform "+e+"ms ease-out",transformStyle:"preserve-3d",width:c.width()-this.options.margin.horizontal,
left:this.options.margin.left,height:"100%",border:"none",overflow:"visible"}));b=[];for(c=0;2>c;c++){var d=$("<div>",{"class":"yoxviewImg"});d.css({backfaceVisibility:"hidden",background:"Black",position:"absolute",top:"50%",left:"50%",width:0,height:0,border:"solid 1px #666",transform:c?"rotateY(180deg)":"rotateY(0)",marginLeft:"-"+this.options.margin.left+"px"});d.attr("data-index",c);b.push(d.appendTo(a))}};this.destroy=function(){g.$container.css("perspective","");a.remove()};this.getCurrentPanel=
function(){return b[c]};this.getPanel=function(){c=c?0:1;return b[c]};this.transition=function(b){g.getCurrentPanel().css(b.position);b.isUpdate?a.css({width:g.$container.width()-this.options.margin.horizontal,left:this.options.margin.left}):(d+=b.index<f&&!(f===this.items.length-1&&0===b.index)||b.index===this.items.length-1&&!f?-180:180,f=b.index,a.css("transform","rotateY("+d+"deg)"))};this.update=function(b){void 0!==b.transitionTime&&a.css("transitionDuration",b.transitionTime+"ms")}};
yox.view.transitions.flip.prototype=new yox.view.transition;
yox.view.transitions.morph=function(){var a,b,c=1,e,d;this.create=function(c){a=$("<div>",{"class":"yoxviewFrame yoxviewFrame_"+this.options.resizeMode+" yoxviewFrame_"+yox.utils.browser.getPlatform()}).appendTo(c);this.options.transitionTime&&(d=e=this.options.transitionTime,a.css({transition:"all "+e+"ms ease-out",top:"50%",left:"50%",width:0,height:0}),$.browser.webkit&&a[0].style.setProperty("-webkit-transform","translateZ(0)"));b=[];for(c=0;2>c;c++){var g=$("<div>",{"class":"yoxviewImg"});g.css("display",
"inline");0<c&&g.css({opacity:"0"});g.css({transition:["all ",this.options.transitionTime,"ms ease-out"].join("")});$.browser.webkit&&g[0].style.setProperty("-webkit-transform","translateZ(0)");g.attr("data-index",c);b.push(g.appendTo(a))}};this.destroy=function(){a.remove()};this.getCurrentPanel=function(){return b[c]};this.getPanel=function(){c=c?0:1;return b[c]};this.transition=function(f){var g=$.extend({},f.position);if(void 0!==f.duration){if(isNaN(f.duration))throw new TypeError("Invalid value for transition time, must be a number (in milliseconds).");
}else f.duration=e;f.duration!==d&&(g.transition="all "+f.duration+"ms ease-out",d=f.duration);f.isUpdate||b[1].css("opacity",c);a.css(g)};this.update=function(c){if(void 0!==c.transitionTime){a.css("transitionDuration",c.transitionTime+"ms");for(var d=b.length;d--;)b[d].css("transitionDuration",c.transitionTime+"ms")}}};yox.view.transitions.morph.prototype=new yox.view.transition;yox.theme=function(){};yox.themes={};
yox.theme.prototype={create:function(){throw Error("'create' method is not implemented for this theme.");},destroy:function(){throw Error("'destroy' method is not implemented for this theme.");},getThemeClass:function(a){return"yox-theme-"+this.name+(a?"-"+a:"")},init:function(a,b,c){function e(a,c,e){e.data=b instanceof yox.data?b:new yox.data(b);e.eventsHandler={addEventListener:function(a,b){d.addEventListener(a,b.bind(this))},triggerEvent:function(a,b){d.triggerEvent.call(this,a+"."+c,b,e.id)}};
return new l(a,e)}if(!(b instanceof yox.data))throw Error("Invalid data provided for theme, must be an instance of yox.data.");var d=new yox.eventsHandler;$.extend(this,d);this.create(a);for(var f in this.config){var g=this.config[f],l=yox[f];if(!l)throw Error("Module not found: '"+f+"', can't create theme '"+this.name+"'.");var m=$(".yox"+f,a);if(g instanceof Array){this.modules[f]=[];for(var h=0;c=g[h];h++)this.modules[f].push(e(m[h],f,c))}else this.modules[f]=e(m[0],f,g)}},config:{},modules:{}};
yox.themes.inline=function(a,b){function c(){}function e(){n&&(i=!i);i?(k=setTimeout(function(){h.$thumbnails.css({opacity:0});document.body.style.cursor="none"},3E3),m.modules.view.option("resizeMode","fit")):(clearTimeout(k),h.$thumbnails.css("opacity","1"),h.gallery.style.height=o+"px",document.body.style.cursor="default",m.modules.view.option("resizeMode","fill"));f();var a=$(window),b=i?a.on:a.off;b.call(a,"mousemove",l);n||b.call($(document),"keydown",g)}function d(){n?i?document.cancelFullScreen():
(h.gallery.style.height="100%",h.gallery.requestFullScreen()):(i=!i,h.gallery.style.position=i?"fixed":"relative",h.gallery.style.height=i?"100%":o,h.gallery.style.border=i?"none":"solid 1px Black",h.gallery.style.zIndex=i?"100":"1",e())}function f(){m.modules.view.update(!0);p=h.thumbnails.getClientRects()[0]}function g(a){27===a.keyCode&&d()}function l(a){if(!q||a.pageX<q.x-4||a.pageX>q.x+4||a.pageY<q.y-4||a.pageY>q.y+4)clearTimeout(k),h.$thumbnails.css("opacity","1"),document.body.style.cursor=
"default",k=setTimeout(function(){a.pageY>=p.top||(h.$thumbnails.css({opacity:0}),document.body.style.cursor="none")},2E3);q={x:a.pageX,y:a.pageY}}var m=this,h,k,i,n,o,p,q;this.name="inline";this.config={view:{enableKeyboard:!0,enlarge:!0,resizeMode:"fill",transition:"fade",transitionTime:300,events:{cacheStart:function(){h.loader.style.display="inline"},cacheEnd:function(){h.loader.style.display="none"},"click.thumbnails":function(a){this.selectItem(a.index)},"init.view":function(){this.selectItem(0)}}},
thumbnails:{events:{beforeSelect:function(a){this.select(a.newItem.id-1)},loadItem:function(a){$(this.thumbnails[a.id-1]).addClass("loaded")},"create.thumbnails":function(){this.select(0)}}}};document.cancelFullScreen=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||c;HTMLElement.prototype.requestFullScreen=HTMLElement.prototype.requestFullScreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.webkitRequestFullScreen||c;(n=document.cancelFullScreen!==
c)&&document.addEventListener(document.mozCancelFullScreen?"mozfullscreenchange":"webkitfullscreenchange",e,!1);this.create=function(a){$(a).addClass(this.getThemeClass());h={container:a,title:document.createElement("h2"),gallery:document.createElement("div"),viewer:document.createElement("div"),thumbnails:document.createElement("div"),loader:document.createElement("loader"),description:document.createElement("p")};h.$thumbnails=$(h.thumbnails);a.appendChild(h.title);a.appendChild(h.gallery);a.appendChild(h.description);
h.gallery.appendChild(h.viewer);h.gallery.appendChild(h.thumbnails);h.gallery.appendChild(h.loader);h.viewer.className=this.getThemeClass("viewer")+" yoxview";h.title.className=this.getThemeClass("title");h.gallery.className=this.getThemeClass("gallery");h.thumbnails.className=this.getThemeClass("thumbnails")+" yoxthumbnails";h.loader.className=this.getThemeClass("loader")+" yoxloader";h.description.className=this.getThemeClass("description");b.title&&(h.title.innerHTML=b.title);o=h.gallery.clientHeight;
p=h.thumbnails.getClientRects()[0];$(h.gallery).on("dblclick",d);$(window).on("resize",f)};this.destroy=function(){$(h.container).removeClass(this.getThemeClass());h.container.removeChild(h.title);h.container.removeChild(h.gallery);h.container.removeChild(h.description);h=null;$(window).off("resize",f)}};yox.themes.inline.prototype=new yox.theme;
yox.themes.scroll=function(a,b){var c=this;this.name="scroll";this.config={thumbnails:[{id:"scroller",useFullImages:!0,events:{beforeSelect:function(a){this.select(a.newItem.id-1)},"select.view":function(a){c.triggerEvent("select.thumbnails",this.thumbnails[a.id-1],"scroller")}}},{id:"thumbnails",events:{beforeSelect:function(a){this.select(a.newItem.id-1)},loadItem:function(a){$(a.thumbnail.element).addClass("loadedThumbnail")}}}],scroll:{events:{"create.thumbnails":function(a,b){"scroller"===b&&
this.update()},"select.thumbnails":function(a){this.scrollTo(a,{centerElement:!0,time:0.5})},resize:function(){this.update()}},toggleButtons:!1},view:{delayOpen:!0,enableKeyboard:!0,events:{"click.thumbnails":function(a,b){"thumbnails"===b&&this.selectItem(a.index)},"click.scroll":function(a){this.selectItem(a.target.parentNode,"yoxscroll")}}}};var e;this.create=function(a){"static"===$(a).css("position")&&a!==document.body&&(a.style.position="relative");a.style.overflow="hidden";e=document.createElement("div");
e.className=this.getThemeClass("wrapper");var f=document.createElement("div");f.className=this.getThemeClass("scroller")+" yoxview yoxthumbnails yoxscroll ";e.appendChild(f);a.appendChild(e);!1!==b.renderThumbnails&&(a=document.createElement("div"),a.className=this.getThemeClass("thumbnails")+" thumbnails yoxthumbnails",e.appendChild(a));a=document.createElement("div");a.className=this.getThemeClass("loader")+" yoxloader";e.appendChild(a);$(window).on("resize",function(){c.triggerEvent("resize")})};
this.destroy=function(){e.parentNode.removeChild(e);e=null}};yox.themes.scroll.prototype=new yox.theme;
yox.themes.slideshow=function(){var a,b,c,e,d=this;this.name="slideshow";this.config={view:{enableKeyboard:!0,transition:"flip",margin:10,transitionTime:600,events:{beforeSelect:function(b){a.innerHTML=b.newItem.id+" / "+this.items.length},create:function(){this.selectItem(0)}}}};this.create=function(f){function g(a,b){var c=document.createElement("a");c.className=d.getThemeClass("button")+" "+d.getThemeClass("button-"+a);c.setAttribute("data-method",a);c.setAttribute("href","#");c.textContent=b;
return c}b=f;$(f).addClass(this.getThemeClass());c=document.createElement("div");c.className=this.getThemeClass("viewer")+" yoxview";f.appendChild(c);e=document.createElement("div");e.className=this.getThemeClass("controls");f.appendChild(e);e.appendChild(g("first","First"));e.appendChild(g("prev","Previous"));f=document.createElement("span");f.className=this.getThemeClass("position");a=f;e.appendChild(f);e.appendChild(g("next","Next"));e.appendChild(g("last","Last"));$(e).on("click","a",function(a){a.preventDefault();
d.modules.view[this.getAttribute("data-method")]()})};this.destroy=function(){b.removeChild(e);b.removeChild(c);$(b).removeClass(this.getThemeClass())}};yox.themes.slideshow.prototype=new yox.theme;