function Yox(a,b){this.container=a;this.options=b||{};this.init()}
Yox.prototype={init:function(){if(this.options.theme){var a=new yox.eventsHandler,b,c=this;this.options.data&&(b=this.options.data instanceof yox.data?this.options.data:new yox.data(this.options.data));var e=function(d,e){var g=yox.themes[d];if(!g)throw Error("Invalid theme, '"+d+"' does not exist.");g=new g(b,$.extend({},g.defaults,e));if(!(g instanceof yox.theme))throw Error("Invalid theme, '"+d+"' is not an instance of yox.theme.");g.init(c.container,b,a,e);return g};if(this.options.theme instanceof
Array){this.themes={};for(var g=0,d;d=this.options.theme[g];g++)this.themes[d.id||d.name]=e(d.name,d.options||{})}else d=e(this.options.theme,this.options),this.modules=d.modules;$.extend(this,{destroy:function(){for(var a in this.modules){var b=this.modules[a],c=b.destroy;c&&c.call(b)}d.destroy.call(d)},data:b},a)}delete this.init}};yox="undefined"===typeof yox?{}:yox;
$.fn.yox=function(a){return!this.length?this:this.each(function(b,c){var e=$(this).data("yox");if("string"===typeof a&&e)if(e&&e[a])e[a].apply(e,Array.prototype.slice.call(arguments,1));else throw Error("Invalid method '"+a+"'");else Object(a)===a||!a?$(this).data("yox",new Yox(this,a)):$.error("Method "+a+" does not exist on Yox.")})};
yox.utils={browser:{getCssPrefix:function(){if(arguments.callee.cache)return arguments.callee.cache;var a="-"+yox.utils.browser.getPrefix().toLowerCase()+"-";return this.cache=a},getPlatform:function(){if(arguments.callee.platform)return arguments.callee.platform;arguments.callee.platform=/(Android)|(iPhone)|(iPod)/.test(navigator.userAgent)||4E5>screen.width*screen.height?this.platforms.mobile:this.platforms.desktop;return arguments.callee.platform},getPrefix:function(){if(arguments.callee.cache)return arguments.callee.cache;
for(var a=["Moz","Webkit","O","ms"],b=document.createElement("div"),c,e,g,d=0;d<a.length&&!g;d++)e=a[d],c=e+"Transform",c in b.style&&(g=e);return arguments.callee.cache=g},platforms:{desktop:"desktop",mobile:"mobile"}},css:{addJqueryCssHook:function(a){if("undefined"===typeof jQuery)return!1;var b=yox.utils.css.getSupportedProperty(a);b&&b!==a&&(jQuery.cssHooks[a]={get:function(a){return $.css(a,b)},set:function(a,e){a.style[b]=e}});return!0},addJqueryCssHooks:function(a){for(var b=a.length;b--;)yox.utils.css.addJqueryCssHook(a[b])},
getSupportedProperty:function(a){var b,c;b=a.charAt(0).toUpperCase()+a.slice(1);var e=yox.utils.browser.getPrefix(),g=document.createElement("div");a in g.style?c=a:(b=e+b,b in g.style&&(c=b));return $.support[a]=c}},dom:{isElement:Object(HTMLElement)===HTMLElement?function(a){return a instanceof HTMLElement}:Object(Element)===Element?function(a){return a instanceof Element}:function(){return Object(el)===el&&1===el.nodeType&&"string"===typeof el.nodeName},scrollIntoView:function(a,b,c,e){function g(a){var b=
n[a]-o[a]-e;if(m[a]>b)l[a]=o[a]+b;else{var c=q[a],b=n[a]-o[a]+f[c]+e,c=m[a]+d[c];c<b&&(l[a]=o[a]+b-c)}}var d={width:b.clientWidth,height:b.clientHeight},i=b.scrollHeight,k=b.scrollWidth,e=e||0;if(d.height>=i&&d.width>=k)return!1;if(!c)return a.scrollIntoView(),!0;var a=$(a),n=a.offset(),f={width:a.width(),height:a.height()},o={left:b.scrollLeft,top:b.scrollTop},m=$(b).offset(),l={},q={top:"height",left:"width"};g("top");g("left");if(void 0!==l.top||void 0!==l.left)a={},l.top&&(a.scrollTop=l.top),
l.left&&(a.scrollLeft=l.left),$(b).stop(!0,!0).animate(a,c)}},dimensions:{distributeMeasures:function(a){var b={top:0,bottom:0,left:0,right:0};if(a){var c="number"===typeof a,e;for(e in b)b[e]=c?a:a[e]||0}b.horizontal=b.left+b.right;b.vertical=b.top+b.bottom;return b},resize:{fill:function(a,b,c){c=c||{};a.ratio=a.ratio||a.height/a.width;var e=c.enlarge?b.width:Math.min(a.width,b.width),g=Math.round(e*a.ratio),d=b.height;if(g<d&&(d<=a.height||c.enlarge))g=d,e=Math.round(g/a.ratio);return{left:Math.round((b.width-
e)/2),top:Math.round((b.height-g)/2),width:Math.round(e),height:Math.round(g)}},fit:function(a,b,c){c=c||{};a.ratio=a.ratio||a.height/a.width;var e=c.margin||{},g=c.padding||{},d=b.width-(e.horizontal||0)-(g.horizontal||0),c=c.enlarge?d:Math.min(a.width,d),d=Math.round(c*a.ratio),i=b.height-(e.vertical||0)-(g.vertical||0);d>i&&(d=i,c=Math.round(d/a.ratio));return{left:(b.width-(e.left||0)-(e.right||0)-c)/2+(e.left||0)-(g.left||0),top:(b.height-(e.top||0)-(e.bottom||0)-d)/2+(e.top||0)-(g.top||0),width:c,
height:d}}}},performance:{debounce:function(a,b,c){var e=this,g=Array.prototype.slice.call(arguments,2);clearTimeout(a.bounceTimer);a.bounceTimer=setTimeout(function(){a.apply(e,g)},b)},throttle:function(a,b){a.bounceTimer=null;return function(){var c=this,e=arguments;clearTimeout(a.bounceTimer);a.bounceTimer=setTimeout(function(){a.apply(c,e)},b)}}},url:{queryToJson:function(a){if(!a)return null;for(var a=a.split("&"),b={},c=a.length;c--;){var e=a[c].split("=");b[e[0]]=2==e.length?e[1]:!0}return b}}};
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,e=function(){},g=function(){return c.apply(this instanceof e?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;g.prototype=new e;return g});
yox.eventsHandler=function(){var a={_default:{}};this.triggerEvent=function(b,c,e){var g=b.split("."),b=g[0];if(g=g[1])if(g=a[g]){var d=g[b];if(d)for(var g=0,i;i=d[g];g++)i.call(this,c,e)}if(b=a._default[b])for(g=0;i=b[g];g++)i.call(this,c,e)};this.addEventListener=function(b,c){var e=b.split("."),g=e[0],d=e[1];d?(e=a[d])||(e=a[d]={}):e=a._default;(d=e[g])||(d=e[g]=[]);d.push(c)};this.removeEventListener=function(b,c){var e=b.split("."),g=e[0],d=e[1],i,e=!1;d?(i=a[d])||(i=a[d]={}):i=a._default;if((g=
i[g])&&g.length)for(d=g.length;d--;)g[d]===c&&(g.splice(d,1),e=!0);return e}};yox.eventsHandler.prototype={bindTriggerEvent:function(a,b){var c=this;return function(e,g){return c.triggerEvent.call(a,e,g,b)}}};yox.data=function(a){this.data=[];this.options=$.extend(!0,{},this.defaults,a);a=this.options.eventsHandler||new yox.eventsHandler;$.extend(this,a);if(this.options.events)for(var b in this.options.events)this.addEventListener(b,this.options.events[b]);this.options.source&&this.addSources(this.options.source)};
yox.data.prototype={defaults:{cache:!1},addSources:function(a){var b=[],c=a instanceof Array?a:arguments,e=this;this.triggerEvent("loadSourcesStart",c);this.isLoading=!0;for(var g=0;g<c.length;g++){var d=this.loadSource(c[g]);d&&b.push(d)}$.when.apply(this,b).done(function(){for(var a=0;a<arguments.length;a++)e.data.push(arguments[a]);e.isLoading=!1;e.triggerEvent("loadSources",Array.prototype.slice.call(arguments,0))})},clear:function(){this.triggerEvent("removeSources",this.data);this.triggerEvent("clear");
this.data=[]},countItems:function(){for(var a=0,b=this.data.length;b--;)a+=this.data[b].items.length;return a},findDataSource:function(a){for(var b in yox.data.sources){var c=yox.data.sources[b];if(c.match(a))return c}return null},getData:function(){return this.data},getDataSource:function(a){return yox.data.sources[a]},loadSource:function(a){var b=a.type?this.getDataSource(a.type):this.findDataSource(a),c=this;if(!b)return null;var e=$.Deferred(),g=function(b){c.store(a,b);e.resolve(b)},d=this.store(a);
if(d)g(d);else{a.page&&a.pageSize&&void 0===a.offset&&(a.offset=a.pageSize*a.page);if(b.map)for(var i in b.map)(d=a[i])&&(a[b.map[i]]=d);b.load(a,g,function(){e.reject()})}return e},source:function(a){this.clear();this.addSources.apply(this,arguments)},store:function(a,b){if(!this.options.cache||!window.localStorage||!a||!a.url)return!1;var c=this.namespace+".source."+a.url;if(!b)return(c=window.localStorage.getItem(c))?JSON.parse(c):null;window.localStorage.setItem(c,JSON.stringify(b));return!0}};
yox.data.source=function(){};yox.data.sources={};yox.data.source.prototype={load:function(){throw Error("'load' function isn't implemented for this data source.");},match:function(){throw Error("'match' function isn't implemented for this data source.");}};
yox.data.sources.element=function(){var a=Object(HTMLElement)===HTMLElement?function(a){return a instanceof HTMLElement}:Object(Element)===Element?function(a){return a instanceof Element}:function(){return Object(el)===el&&1===el.nodeType&&"string"===typeof el.nodeName};return{name:"element",match:function(b){return a(b)||b instanceof jQuery||b.element&&a(b.element)||b.element instanceof jQuery},load:function(a,c){var e=[];$("a:has('img')",a instanceof HTMLElement?a:a.element).each(function(){var a=
$("img:first",this)[0];e.push({thumbnail:{element:this,image:a,src:a.src},url:this.href,title:this.title||a.title,type:"image"})});var g={items:e,source:a,sourceType:"element",createThumbnails:!1};c&&c(g);return g}}}();
yox.data.sources.files=function(){var a;a=window.URL&&window.URL.createObjectURL?function(a){return window.URL.createObjectURL(a)}:window.webkitURL&&window.webkitURL.createObjectURL?function(a){return window.webkitURL.createObjectURL(a)}:function(){return null};return{name:"files",match:function(){return!1},load:function(b,c){if(!c)return!1;for(var e=[],g=0,d;d=b.files[g];g++)if(/^image\//.test(d.type)){var i=a(d);e.push({url:i,type:"image",title:d.name||d.fileName,thumbnail:{src:i}})}c({items:e,
source:b,sourceType:"files",createThumbnails:!0})}}}();
yox.data.sources.flickr=function(a){function b(a,b){return"http://farm"+a.farm+".static.flickr.com/"+a.server+"/"+(a.primary||a.id)+"_"+a.secret+b+".jpg"}function c(f,c){var d=f.photoset||f.photos,e,o=[],k=f.photoset?"/in/set-"+f.photoset.id:"";d?e=f.photoset?f.photoset.photo:f.photos.photo:f.photosets?e=f.photosets.photoset:f.collections&&(e=f.collections.collection[0].set);if(e){var i=m[c.thumbsize],n=m[c.imageSize];a.each(e,function(a,f){var e={thumbnail:{src:b(f,i)},link:(g+"photos/"+(f.owner||
c.user_id)+"/"+f.id+k).replace(/\s/g,"_"),url:b(f,n),title:d?f.title:f.title._content,type:"image",description:f.description?f.description._content:void 0};d||(e.data={photoset_id:f.id});o.push(e)})}return o}var e="flickr",g="http://www.flickr.com/",d="http://api.flickr.com/services/rest/",i=/\d+@N\d+/,k=/^http:\/\/(?:www\.)?flickr\.com\/(\w+)\/(?:([^\/]+)\/(?:(\w+)\/?(?:([^\/]+)\/?)?)?)?(?:\?(.*))?/,n={api_key:"9a220a98ef188519fb87b08d310ebdbe",format:"json"},f={imageSize:"medium",thumbsize:"thumbnail",
setThumbnail:!0,setSinglePhotosetThumbnails:!0,setTitle:!0,method:"flickr.photosets.getList",extras:"description"},o={sets:function(a,f){return{method:f||a.photoset_id?"flickr.photosets.getPhotos":"flickr.photosets.getList",photoset_id:f}},galleries:function(a,f){return{method:f?"flickr.galleries.getPhotos":"flickr.galleries.getList",gallery_id:f}},collections:function(a,f){return{method:"flickr.collections.getTree",collection_id:f}},"default":function(){return{method:"flickr.photos.search"}}},m=
{smallSquare:"_s",thumbnail:"_t",small:"_m",medium:"",large:"_b",original:"_o"};return{name:e,defaults:f,map:{pageSize:"per_page"},match:function(a){return a.url&&k.test(a.url)},load:function(l,q){function h(){a.ajax({url:d,dataType:"jsonp",data:v,jsonpCallback:"jsonFlickrApi",success:function(f){var d={source:l,sourceType:e,createThumbnails:!0};d.items=c(f,v);(f.photosets||f.collections)&&a.extend(d,{createGroups:!0});if(0<d.items.length&&(v.setThumbnail&&!v.setSinglePhotosetThumbnails||l.isSingleLink))a.extend(d,
{isGroup:!0,link:(g+"photos/"+f.photoset.owner+"/sets/"+f.photoset.id+"/").replace(/\s/g,"_"),thumbnailSrc:l.isSingleLink?void 0:b(f.photoset.photo[0],m[v.thumbsize]),title:"None"});q&&q(d)},error:function(){if(options.onLoadError)options.onLoadError("Flickr plugin encountered an error while retrieving data")}})}var p=!0,r=l.url&&l.url.match(k),s,t={},y={method:"flickr.urls.lookupUser",onData:function(a){return{user_id:a.user.id,username:a.user.username._content}}};if(l.url&&!r)return!1;if(r){var w=
r[1],x=r[2],u=r[3],z=r[4];if(r=r[5])s=yox.utils.url.queryToJson(r),a.extend(t,s);if("search"==w){t.method="flickr.photos.search";t.text=s.q;s.w&&(s.w=s.w.replace("%40","@"),s.w.match(i)&&(t.user_id=s.w));if(!s||!s.sort)t.sort="relevance";p=!1}else u?(a.extend(t,o[u||"default"](l,z)),"galleries"===u&&z&&(p=!0,y={method:"flickr.urls.lookupGallery",onData:function(a){return{gallery_id:a.gallery.id,title:a.gallery.title}}})):t.method="flickr.people.getPublicPhotos",t.username=x,t.type=u}var v=jQuery.extend({},
f,t,l,n);v.media="photos";v.user&&v.photoset_id&&(v.method="flickr.photosets.getPhotos");s=screen.width>screen.height?screen.width:screen.height;if(!v.imageSize||800>=s.width&&"medium"!=v.imageSize)v.imageSize="medium";p?a.ajax({url:d,dataType:"jsonp",data:a.extend({url:l.url,method:y.method},n),jsonpCallback:"jsonFlickrApi",success:function(f){a.extend(v,y.onData(f));h()}}):h()}}}(jQuery);
yox.data.sources.html=function(){return{name:"html",match:function(a){return yox.utils.dom.isElement(a)||a instanceof jQuery||a.element&&yox.utils.dom.isElement(a.element)||a.element instanceof jQuery},load:function(a,b){var c=[];if(a.selector&&a.element)for(var e=a.element.querySelectorAll(a.selector),g=0,d=e.length;g<d;g++){var i=e[g];c.push({element:i,name:i.id,type:"html",title:i.title||i.getAttribute("data-title"),width:i.clientWidth,height:i.clientHeight,thumbnail:{src:i.getAttribute("data-thumbnail"),
className:a.thumbnailsClass||"yox-thumbnail"}});i.parentNode.removeChild(i)}else if(a.items){c=Array.prototype.slice.call(a.items,0);g=0;for(d=c.length;g<d;g++)c[g].type="html"}b({items:c,source:a,sourceType:"html",createThumbnails:!0})}}}();
yox.data.sources.picasa=function(){function a(a,c){var e=a.match(d),g=$.extend({},f,c);if(e&&1<e.length){var h=e[2],i=e[3];g.user=e[1];h?(g.album=h,g.fields+=",entry(summary),gphoto:name"):g.fields+=",entry(title),entry(gphoto:numphotos),entry(gphoto:name),entry(link[@rel='alternate']),author,entry(summary)";i&&$.extend(g,yox.utils.url.queryToJson(i))}g.imgmax=b(n,g.imgmax);g.thumbsize=b(g.cropThumbnails?k:n,g.thumbsize)+(g.cropThumbnails?"c":"u");return g}function b(a,f){for(var b=Math.min(f,Math.max(screen.width,
screen.height)),c=a.length,d;c-- -1&&(d=a[c])&&a[c-1]>=b;);return d}function c(a){var f=i;a.user&&"lh"!=a.user?(f+="user/"+a.user,a.album&&(f+="/album/"+a.album)):f+="all";return f}function e(a){var f=[];jQuery.each(a.feed.entry,function(a,b){var c="album"===b.category[0].term.match(/#(.*)$/)[1];if(c&&!b.gphoto$numphotos.$t)return!0;var d=b.media$group.media$content[0],e={thumbnail:{src:b.media$group.media$thumbnail[0].url},url:d.url,link:b.link[0].href,title:c?b.title.$t:b.summary.$t,type:"image",
author:{name:b.media$group.media$credit[0].$t},width:parseInt(b.gphoto$width,10),height:parseInt(b.gphoto$height,10)};e.ratio=e.height/e.width;c?(e.data={album:{name:b.title.$t,imageCount:b.gphoto$numphotos.$t,description:b.summary.$t}},e.isLoaded=!0):$.extend(e,{width:d.width,height:d.height,ratio:d.height/d.width});f.push(e)});return f}var g=/^https?:\/\/picasaweb\.google\./,d=/^https?:\/\/picasaweb\.google\.\w+\/([^\/#\?]+)\/?([^\/#\?]+)?(?:\?([^#]*))?/,i="http://picasaweb.google.com/data/feed/api/",
k=[32,48,64,72,104,144,150,160],n=[94,110,128,200,220,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600].concat(k).sort(function(a,f){return a-f}),f={setThumbnail:!0,setSingleAlbumThumbnails:!0,setTitle:!0,alt:"json",cropThumbnails:!1,thumbsize:64,imgmax:n[n.length-1],fields:"category(@term),entry(category(@term)),title,entry(summary),entry(media:group(media:thumbnail(@url))),entry(media:group(media:content(@url))),entry(media:group(media:content(@width))),entry(media:group(media:content(@height))),entry(link[@rel='alternate'](@href)),entry(media:group(media:credit)),openSearch:totalResults,entry(gphoto:height),entry(gphoto:width)"};
return{name:"picasa",map:{pageSize:"max-results",offset:"start-index"},match:function(a){return a.url&&g.test(a.url)},load:function(f,b){var d=a(f.url,f);$.ajax({url:c(d),dataType:"jsonp",data:d,success:function(a){var c={source:f,sourceType:"picasa",totalItems:a.feed.openSearch$totalResults.$t};if(!a.feed.entry||0==a.feed.entry.length)c.items=[];else{var d=a.feed.category[0].term.match(/#(.*)$/)[1];"user"===d&&$.extend(c,{title:a.feed.title.$t,data:{kind:"user",author:{name:a.feed.author[0].name.$t,
link:a.feed.author[0].uri.$t}}});c.createThumbnails=!0;c.items=e(a,d)}b&&b(c)},error:function(a,f){console.log("error: ",arguments)}})}}}();
yox.data.sources.twitpic=function(a){function b(a){return(a=a.match(d))?{method:a[1],userId:a[2]}:null}function c(a,f){var b=[e,k[a.method],"/show.jsonp?username=",a.userId,"&key=",g];f.page&&b.push("&page=",f.page);return b.join("")}var e="http://api.twitpic.com/2/",g="f0be525ae803e5f60882432e925cbbc0",d=/^http:\/\/(?:www\.)?twitpic\.com\/(\w+)\/([^\/\?#]+)/,i={imageSize:"full",thumbsize:"mini",page:1},k={photos:"users"};return{name:"twitpic",defaults:i,match:function(a){return a.url&&d.test(a.url)},
load:function(d,f,e){var m=b(d.url);if(!m)return e&&e({message:"Invalid Twitpic URL, can't parse fields."}),!1;a.ajax(c(m,d),{dataType:"jsonp",success:function(a){for(var b=jQuery.extend({},i,m,d),c=[],e={name:a.name,avatar:a.avatar_url,link:a.website},o=0,k;k=a.images[o];o++)c.push({thumbnail:{src:["http://twitpic.com/show/",b.thumbsize,"/",k.short_id,"?key=",g].join("")},link:"http://twitpic.com/"+k.short_id,url:["http://twitpic.com/show/",b.imageSize,"/",k.short_id,"?key=",g].join(""),title:k.message,
type:"image",author:e});f({source:d,sourceType:"twitpic",items:c})}})}}}(jQuery);
yox.data.sources.youtube=function(a){function b(a){var b,f,c=16/9,d=!1;!a.width&&!a.height&&(a.width=720);if(a.height&&!a.width||a.width&&!a.height)"string"===typeof a.aspectRatio&&("auto"===a.aspectRatio?a.aspectRatio=4/3:(d=a.aspectRatio.split(":"),a.aspectRatio=parseInt(d[0],10)/parseInt(d[1],10))),d=a.aspectRatio===16/9,a.height?(b={height:a.height,width:a.height*c},d||(f={height:a.height,width:a.height*a.aspectRatio})):(b={width:a.width,height:a.width/c},d||(f={width:a.width,height:a.width/a.aspectRatio}));
return function(a){return a?b:f}}function c(a){var b=document.createElement("object");b.setAttribute("width","100%");b.setAttribute("height","100%");b.innerHTML="<param name='movie' value='"+a+"'</param><param name='allowFullScreen' value='true'></param><param name='wmode' value='transparent'></param><param name='allowScriptAccess' value='always'></param><embed src='"+a+"' type='application/x-shockwave-flash' allowfullscreen='true' allowscriptaccess='always' wmode='transparent' width='100%' height='100%'></embed>";
return b}function e(b,d){var f={type:"html",thumbnail:{src:b.thumbnail[d.hqThumbnails?"hqDefault":"sqDefault"]},link:b.player["default"],element:c(b.content["5"]+"&fs=1&hd=1&enablejsapi=1&playerapiid=ytplayer"+c.id++ +"&version=3"),title:b.title,id:b.id,description:b.description,duration:b.duration};a.extend(f,d.getDimensions(b.aspectRatio&&"widescreen"===b.aspectRatio));f.width&&f.height&&(f.ratio=f.height/f.width);return f}function g(b,d){var f=[];if(d.filter){var c=d.filter.match(/!([^,]+)/g),
g=d.filter.match(/(,|^)[^!,]([^,]+)/g),c=c?c.join("|").replace(/^!/,"").replace(/\|!/g,"|"):null,g=g?g.join("|").replace(/\|,/g,"|"):null;c&&(d.negativeFilterRegex=RegExp("(?:^|,)("+decodeURI()(c)+")(?:,|$)"));g&&(d.positiveFilterRegex=RegExp("(?:^|,)("+decodeURI()(g)+")(?:,|$)"))}a.each(b,function(a,b){"playlist"===d.feedType&&(b=b.video);var c;c=b.tags;if(!d.filter||!c)c=!1;else{c=c.join(",");var g=d.negativeFilterRegex&&d.negativeFilterRegex.test(c);g||(g=d.positiveFilterRegex&&!d.positiveFilterRegex.test(c));
c=g}c||f.push(e(b,d))});return f}var d=/^http:\/\/(?:www\.)?youtube.com\//,i={singleVideo:/^http:\/\/(?:www\.)?youtube.com\/watch\?v=([^\&]+)(.*)?/,playlist:/^http:\/\/(?:www\.)?youtube.com\/(?:view_play_list|my_playlists)\?p=([^\&]+)(.*)?/,user:/^http:\/\/(?:www\.)?youtube.com\/user\/([^\?]+)(?:\?(.*))?/,search:/^http:\/\/(?:www\.)?youtube.com\/results\?(.*)/};apiUrl="http://gdata.youtube.com/feeds/api/videos";fixedOptions={v:2,format:5,alt:"jsonc"};defaults={hqThumbnails:!1,aspectRatio:"auto"};
c.id=1;return{name:"youtube",match:function(a){return a.url&&d.test(a.url)},load:function(c,d){if(!d)throw Error("Can't load YouTube data, no callback provided.");var f=a.extend({},defaults,c,fixedOptions);if(c.url){var e,m;for(m in i)if(e=c.url.match(i[m])){f.feedType=m;break}if(e){switch(f.feedType){case "singleVideo":f.isSingleVideo=!0;f.url+="/"+e[1];break;case "playlist":f.url="http://gdata.youtube.com/feeds/api/playlists/"+e[1];break;case "user":f.url="http://gdata.youtube.com/feeds/api/users/"+
e[1]+"/uploads";break;case "search":f.url=apiUrl}if(e=yox.utils.url.queryToJson(2==e.length?e[1]:e[2]))e.search_query&&(e.q=e.search_query,delete e.search_query),a.extend(f,e)}}a.ajax({url:f.url,dataType:"jsonp",data:f,async:!1,jsonpCallback:"callback",success:function(a){f.getDimensions=b(f);var e={source:c,sourceType:"youtube",createThumbnails:!0};if(f.isSingleVideo&&!a.data||!f.isSingleVideo&&(!a.data.items||0===a.data.items.length))e.items=[];else if(e.items=g(f.isSingleVideo?[a.data]:a.data.items,
f),!f.isSingleVideo&&(a=a.data.title))e.title=a;d(e)},error:function(){if(f.onLoadError)f.onLoadError("YouTube plugin encountered an error while retrieving data")}})}}}(jQuery);yox.statistics=function(a,b){1===arguments.length&&(b=a,a=null);this.reporter=new yox.statistics.reporters[b.reporter||yox.statistics.defaults.reporter](b);this.category=b.category||"yox.js";var c=b.eventsHandler||new yox.eventsHandler;$.extend(this,c);if(b.events)for(var e in b.events)this.addEventListener(e,b.events[e])};
yox.statistics.prototype={report:function(a){a.category=a.category||this.category;this.reporter.report(a)}};yox.statistics.defaults={reporter:"ga"};yox.statistics.reporter=function(a){this.name=a};yox.statistics.reporters={};yox.statistics.reporter.prototype={report:function(){throw Error("'report' method isn't implemented yet for this reporter type.");}};
yox.statistics.reporters.ga=function(a){if(!_gaq)throw Error("Can't initialize Google Analytics reporter, Google Analytics isn't loaded.");this.report=function(b){_gaq.push(["_trackEvent",b.category||a.category,b.action,b.label,b.value])}};yox.statistics.reporters.ga.prototype=new yox.statistics.reporter("ga");
(function(a){a.fn.yoxscroll=function(b){if(0!=this.length){var c=a(this),e=c.data("yoxscroll");if("string"===typeof b&&e&&e[b])return e[b].apply(e,Array.prototype.slice.call(arguments,1));"object"===typeof b||!b?c.data("yoxscroll",new yox.scroll(this,b)):a.error("Method "+b+" does not exist on yox.scroll.")}return this};yox.scroll=function(a,c){this.container=a;this.init(c)};yox.scroll.prototype=function(){var b,c,e;function g(b,f,c){a(b);var d=b.getElementsByTagName("img"),e=d.length,g=new Date;
if(e){var h=0,m=function(a){c&&c.call(this,a);if((a instanceof Date||"IMG"===a.target.nodeName)&&++h===e)b.removeEventListener("load",m,!0),f&&f(e)},i=function(a){c&&c.call(this,a);++h===e&&f&&f(e);a.srcElement.detachEvent("onload",i)};if(b.addEventListener)b.addEventListener("load",m,!0);else if(b.attachEvent)for(var o=e;o--;)d[o].attachEvent("onload",i);for(o=e;o--;)d[o].complete&&m(g)}else f&&f(0)}function d(){return/(Android)|(iPhone)|(iPod)/.test(navigator.userAgent)||4E5>screen.width*screen.height}
function i(b,f){var c=a(b).data("yoxscroll-"+f);if(c){var c=c.split("-"),d=this[c.shift()];d&&d.apply(this,c)}}function k(){h=w;p=parseInt(this.elements.$slider.css("left"),10)}function n(a,b,f){var c=(a.timeStamp||new Date)-u;if(!c)return!1;z=c;u=a.timeStamp||new Date;x=a.pageX-w;w=a.pageX;this.enableDrag&&(a=p+w-h,c=Math.abs(x)/x,a>=f&&0>=a?b.css("left",a):((!x||c!==s)&&k.call(y),a<f&&t!==f?b.css("left",a=f):0<a&&0!==t&&b.css("left",a=0)),r=!0,s=c,t=a)}function f(a,f,b){var c=this.elements.$slider;
t=b?parseInt(c.css("left"),10):t;var b=t+f*s,d=0<b?(f-b)/f:b<this.minPosition?(f-this.minPosition+b)/f:1;0!==d&&(b=t+d*f*s,a*=d,f=E.getCubicBezier(d),c.css({transition:"left "+a+"s cubic-bezier("+f+")",left:b}))}function o(a){y.elements.$window.off(b,D);currentDirection=0;a.data.view.elements.$window.off(c,o);if(a.data.view.enableDrag&&0!==x){var d=Math.min(Math.abs(x)/(7*z),0.86),e=d*v,d=Math.round(1E3*d*d*v);f.call(a.data.view,e,d);r=!1;y=null}return!1}function m(f){var g=this;f.on(e,function(e){var h=
d?window.event.touches[0]:e;e.preventDefault();w=h.pageX;u=h.timeStamp||new Date;k.call(g,e);g.enableDrag&&f.css({transition:"none",left:f.css("left")});x=0;r=!1;y=g;a(window).on(b,{$slider:f,minPosition:g.minPosition,view:g},D).on(c,{view:g},o)}).on(c,function(a){a.preventDefault();var f=w,f=f>h-4&&f<h+4;(g.enableDrag&&!r||f)&&g.triggerEvent("click",a)})}var l={centerContentsIfNotScrollable:!0,events:{buttonholdstart:function(a){i.call(this,a,"holdstart")},buttonholdend:function(){this.stopScroll()},
buttonclick:function(a){i.call(this,a,"click")}},"float":"left",isHorizontal:!0,scrollByTime:0.5,scrollToEasing:"ease-in-out",scrollToElementTime:0.2,scrollVelocity:500,toggleButtons:!0},q=a(window),h,p,r=!1,s=0,t,y,w,x=0,u,z,v=2.5,d=d();b=d?"touchmove":"mousemove";e=d?"touchstart":"mousedown";c=d?"touchend":"mouseup";var A,C,B={buttonDown:function(f){f.preventDefault();var b=this,e=f.data.view.options.pressedButtonClass;e&&a(b).addClass(e);A=setTimeout(function(){q.on(c,f.data,B.holdEnd);if(!d)q.on("mouseout",
f.data,B.mouseOut);f.data.view.triggerEvent("buttonholdstart",b);A=null;C=b},200)},buttonUp:function(f){var b=f.data.view.options.pressedButtonClass;b&&a(this).removeClass(b);A&&(clearTimeout(A),f.data.view.triggerEvent("buttonclick",this),A=null)},holdEnd:function(a){q.off(c,B.holdEnd);d||q.off("mouseout",B.mouseOut);a.data.view.triggerEvent("buttonholdend",C);C=null;return!1},mouseOut:function(a){a.relatedTarget||B.holdEnd(a)}},E=function(){function a(f,b){this.x=f;this.y=b}var f=[0,0.42,0.36,1],
b=[new a(0,0),new a(f[0],f[1]),new a(f[2],f[3]),new a(1,1)],c=f.join(", ");return{getCubicBezier:function(f){if(f)return c;for(var d=[b,[],[],[]],e=[b[0]],g=1;3>=g;g++)for(j=0;j<=3-g;j++){var h=new a(Math.abs(f-1)*d[g-1][j].x+f*d[g-1][j+1].x,Math.abs(f-1)*d[g-1][j].y+f*d[g-1][j+1].y);d[g][j]=h;j||e.push(h)}f=e[3];for(g=1;4>g;g++)h=e[g],h.x/=f.x,h.y/=f.y;return[e[1].x,e[1].y,e[2].x,e[2].y].join(", ")}}}(),D=d?function(a){n.call(a.data.view,window.event.touches[0],a.data.$slider,a.data.minPosition)}:
function(a){n.call(a.data.view,a,a.data.$slider,a.data.minPosition)};return{calculateSliderSize:function(){this.elements.$slider[this.options.isHorizontal?"width":"height"](999999);var f=a("<span>").appendTo(this.elements.$slider),b=f.position().left;b||(f.css("float",this.options["float"]),b=f.position().left);f.remove();return b},destroy:function(){},init:function(f){var b=a.extend({},f),f=b.eventsHandler||new yox.eventsHandler;a.extend(this,f);f=a.extend({},b.events);delete b.events;b=a.extend(!0,
{},l,b);b.toggleButtons&&(b.events.changeStatus=function(a){this.options.elements.toggle(a.scrollEnabled)});for(var c in f){var d=b.events[c],e=f[c];d?d instanceof Array||(d=b.events[c]=[d]):d=b.events[c]=[];e instanceof Array?d=d.concat(e):"function"===typeof e&&d.push(e)}this.options=b;c=this.elements={$window:a(window),$container:a(this.container),$slider:a("<div>",{"class":"yoxscrollSlider",css:a.extend({position:"relative",top:0,left:0},b.isHorizontal?{height:"100%"}:{width:"100%"})})};a.browser.webkit&&
c.$slider[0].style.setProperty("-webkit-transform","translateZ(0)",null);f=c.$container;"static"===f.css("position")&&f.css("position","relative");f.children().appendTo(c.$slider);c.$slider.appendTo(c.$container);this.initEvents();this.update();this.initButtons();m.call(this,c.$slider);c.$slider.on("click",function(a){a.preventDefault()})},initButtons:function(){if(!this.options.elements)return!1;if(this.options.elements instanceof jQuery)this.options.elements.on(e,{view:this},B.buttonDown).on(c,
{view:this},B.buttonUp)},initEvents:function(){for(var a in this.options.events){var f=this.options.events[a];if(f instanceof Array)for(var b=0;b<f.length;b++)this.addEventListener(a,f[b]);else this.addEventListener(a,f)}},page:function(a){a="left"===a?1:-1;this.scrollBy(a*this.containerSize);this.triggerEvent("page",{pageSize:this.containerSize,direction:a})},scroll:function(a){s="left"===a?1:-1;this.scrollTo(1===s?0:this.minPosition,{easing:"cubic-bezier(.15, .03, .15, .16)"})},scrollBy:function(a){this.scrollTo(a,
{isRelative:!0,time:this.options.scrollByTime})},scrollTo:function(f,b){var b=b||{},c=this.elements.$slider,d=parseInt(c.css("left"),10),e=f instanceof jQuery,g=e?f:void 0,h=b.time;f instanceof HTMLElement&&(g=a(f),e=!0);if(e){e=g.position().left;g=g.width();if(b.centerElement)f=(this.containerSize-g)/2-e;else{var m=e+d;if(m+g>this.containerSize)f=this.containerSize-e-g;else if(0>m)f=-1*e;else return!1}h=h||this.options.scrollToElementTime}b.isRelative&&(f+=d);f=Math.min(Math.max(f,this.minPosition),
0);void 0===h&&(h=Math.abs(f-d)/this.options.scrollVelocity);0===f&&!1!==b.allowCenter&&this.options.centerContentsIfNotScrollable&&!this.enableDrag?this.elements.$slider.css({transition:"none",left:this.minPosition/2}):c.css("transition","left "+h+"s "+(b.easing||this.options.scrollToEasing)).css("left",f)},stopScroll:function(){var a=this.options.scrollVelocity/20/v;f.call(this,a/10,0,!0)},update:function(){this.elements.$container.children(":not(.yoxscrollSlider)").appendTo(this.elements.$slider);
g(this.elements.$container[0],void 0,this.updateSize.bind(this))},updateSize:function(){var a=this.calculateSliderSize();this.elements.$slider.width(a);this.containerSize=this.elements.$container.width();this.minPosition=this.containerSize-a;a=0>this.minPosition;a!==this.enableDrag&&(this.enableDrag=a,(!a&&!this.options.centerContentsIfNotScrollable||0<parseInt(a&&this.elements.$slider.css("left"),10))&&this.elements.$slider.css({transition:"none",left:0}),this.triggerEvent("changeStatus",{scrollEnabled:a}),
this.elements.$container.toggleClass("yoxscroll_scrollEnabled",this.enableDrag));this.options.centerContentsIfNotScrollable&&!a&&this.elements.$slider.css({transition:"none",left:this.minPosition/2})}}}()})(jQuery);
(function(a,b){yox.thumbnails=function(b,e){var g=this;this.container=b instanceof jQuery?b[0]:b;this.options=a.extend(!0,{},this.defaults,e);this.itemCount=0;var d=this.options.eventsHandler||new yox.eventsHandler;a.extend(this,d);this.triggerEvent=function(a,f){d.triggerEvent.call(g,a,f,g)};if(this.options.events)for(var i in this.options.events)this.addEventListener(i,this.options.events[i]);this.options.data&&this.addDataSources(this.options.data);if(!1!==this.options.handleClick){var k=function(b){var f=
this.getAttribute("data-yoxthumbIndex"),c;b.preventDefault();c=this.classList&&g.options.selectedThumbnailClass?this.classList.contains(g.options.selectedThumbnailClass):a(this).hasClass(g.options.selectedThumbnailClass);g.triggerEvent("click",{originalEvent:b,index:f,target:this,isSelected:c});c||g.select(f)};a(this.container).on("click","[data-yoxthumbindex]",k);this.addEventListener("beforeDestroy",function(){a(this.container).off("click","."+g.options.thumbnailClass,k)})}};yox.thumbnails.prototype=
{addDataSources:function(a){function b(a){for(var c=0;c<a.length;c++)d.createThumbnails(a[c])}function g(a){d.options.allowAppend||(d.clear(),this.itemCount=0);b(a)}var d=this,i=a.getData();i&&i.length&&b(i);a.addEventListener("loadSources",g);this.addEventListener("beforeDestroy",function(){a.removeEventListener("loadSources",g)});a.addEventListener("clear",function(){d.clear();this.itemCount=0})},clear:function(){this.thumbnails&&this.thumbnails.remove();this.itemCount=0;this.currentSelectedThumbnail=
null;this.thumbnails=a()},createThumbnail:function(c){var e=a("<a>",{href:c.link||c.url,title:!1!==this.options.renderThumbnailsTitle?c.title:b,"class":this.options.thumbnailClass});e.append(a("<img>",{src:this.options.useFullImages?c.url:c.thumbnail.src,alt:c.title}));return e[0]},createThumbnails:function(b){var e=this,g;this.thumbnails=this.thumbnails||a();if(!1!==b.createThumbnails){if(a.tmpl)g=a.tmpl(a.template(this.template),b.items,{options:this.options,getIndex:function(){return e.itemCount++}}),
g.appendTo(this.container),this.thumbnails=g;else{g=document.createDocumentFragment();for(var d=0,i=b.items.length;d<i;d++,this.itemCount++){var k=b.items[d],n=e.options.createThumbnail?e.options.createThumbnail.call(e,d,k,i):this.createThumbnail(k);n.setAttribute("data-yoxthumbindex",this.itemCount);k.thumbnail.element=n;k.thumbnail.generated=!0;var f=n.getElementsByTagName("img");f.length&&(k.thumbnail.image=f[0]);g.appendChild(n)}this.thumbnails=this.thumbnails.add(g.childNodes);this.container.appendChild(g)}g=
this.container.childNodes}else g=a("a:has(img)",this.container).attr("data-yoxthumbindex",function(){return e.itemCount++}),this.thumbnails=this.thumbnails.add(g),g=g.get();this.triggerEvent("create",{thumbnails:g,items:b.items})},defaults:{allowAppend:!0,renderThumbnailsTitle:!0,selectedThumbnailClass:"selectedThumbnail",thumbnailClass:"yoxthumbnail"},destroy:function(){this.triggerEvent("beforeDestroy");this.clear()},reset:function(){},select:function(a){this.unselect();this.thumbnails&&(this.currentSelectedThumbnail=
this.thumbnails.eq(a).addClass(this.options.selectedThumbnailClass))},template:"<a class='${$item.options.thumbnailClass}' href='${link || url}'{{if $item.options.renderThumbnailsTitle}} title='title'{{/if}} data-yoxthumbIndex='${$item.getIndex()}'><img src='${thumbnail.src}' alt='${title}' /></a>",unselect:function(){this.currentSelectedThumbnail&&(this.currentSelectedThumbnail.removeClass(this.options.selectedThumbnailClass),this.currentSelectedThumbnail=null)}};window.yox.thumbnails=yox.thumbnails})(jQuery);
(function(a){yox.utils.css.addJqueryCssHooks("transition,transitionDuration,transform,transformStyle,backfaceVisibility,perspective".split(","));yox.view=function(b,c,e){var g=a.extend({},c.events),d=yox.view.config,i=yox.view.config.platform[yox.utils.browser.getPlatform()],e=e||yox.view.cache;delete c.events;var c=a.extend(!0,{},d.mode[c.resizeMode||i.resizeMode||d.defaults.resizeMode],d.defaults,i,c),k;for(k in g)d=c.events[k],i=g[k],d?d instanceof Array||(d=c.events[k]=[d]):d=c.events[k]=[],i instanceof
Array?d.concat(i):"function"===typeof i&&d.push(i);this.container=b;this.$container=a(b);this.options=c;this.id=yox.view.id?++yox.view.id:1;this.cache=e;this.direction=1;for(var n in this)b=this[n],"function"===typeof b&&(this[n]=b.bind(this));this.init()};yox.view.prototype=function(){var b,c;function e(a){var b="string"===typeof a?yox.view.transitions[a]:a;if(!b)throw Error('Invalid transition - "'+a+"\" doesn't exist.");a=new b;if(!(a instanceof yox.view.transition))throw Error("Invalid transition - transition constructors must have yox.view.transition as prototype.");
a.create.call(this,this.$container);this.transition=a}function g(a,b){var d=a.data(b);d||((d=n[b].create.call(this))?a.append(d):d=a[0],a.data(b,d),d!==a[0]&&(d.style.height=d.style.width="100%",d.style.display="none"));return d}function d(a){for(var b=[],d=this.items.length,c=0;c<a.length;c++){var e=a[c];this.items=this.items.concat(e.items);b=b.concat(e.items)}c=d;for(d=this.items.length;c<d;c++)this.items[c].id=c+1;this.triggerEvent("load",{items:b,sources:a});this.initialized||(this.initialized=
!0,this.triggerEvent("init"))}function i(a,b){if(a!==this.currentItem)return!1;if(a){var d=n[a.type],c=d.checkLoading?this.transition.getCurrentPanel():this.transition.getPanel(),e=c.data("itemType"),h=g.call(this,c,a.type);e!==a.type&&(e&&(e&&d.clear.call(this,h),c.data(e).style.display="none"),c.data("itemType",a.type));if(d.checkLoading&&!h.loading&&(!this.options.showThumbnailsBeforeLoad||b))c=this.transition.getPanel(a),h=g.call(this,c,a.type);h.style.display="block";d.set.call(this,a,h,b)}else this.transition.getPanel(a),
this.transition.transition.call(this,{item:a}),this.triggerEvent("select",a)}b={40:"down",35:"end",13:"enter",36:"home",37:"left",39:"right",32:"space",38:"up",72:"h",27:"escape"};c=function(a){var d=a.data.view,c=d[d.options.keyPress[b[a.keyCode]]];return c?(a.preventDefault(),c.call(d),!1):!0};var k={resizeMode:function(a){this.getPosition=yox.utils.dimensions.resize[a]},transition:function(a){this.transition.destroy.call(this);e.call(this,a);a=this.currentItem.id-1;this.currentItem=null;this.selectItem(a)}},
n={html:{clear:function(a){a.innerHTML=""},create:function(){var a=document.createElement("div");a.style.overflow="hidden";return a},set:function(a,b){b.loading=!1;a.element?(b.innerHTML="",b.appendChild(a.element)):b.innerHTML=a.html;a.width||(a.width=this.containerDimensions.width);a.height||(a.height=this.containerDimensions.height);a.ratio=a.height/a.width;this.transition.transition.call(this,{position:this.getPosition(a,this.containerDimensions,this.options),index:a.id-1,item:a});this.triggerEvent("select",
a)}},image:function(){function b(a){a=a instanceof yox.view?a:a.data.view;this.loading=!1;if(a.currentItem.url!==this.src&&a.currentItem.thumbnail.src!==this.src)return!1;if(!a.options.showThumbnailsBeforeLoad||this.loadingThumbnail){this.loadingThumbnail=!1;var f=a.currentItem,d=a.getPosition(f,a.containerDimensions,a.options);a.transition.transition.call(a,{position:d,index:f.id-1,item:f})}}return{checkLoading:!0,clear:function(a){a.src=""},create:function(){var d=document.createElement("img");
d.src="";a(d).on("load",{view:this},b);return d},set:function(a,d,c){a=c&&a.thumbnail?a.thumbnail.src:a.url;d.loading=!0;c&&(d.loadingThumbnail=!0);d.src!==a?(d.src="",d.src=a):b.call(d,this)}}}()};return{addDataSources:function(a){function b(a){d.call(c,a)}var c=this,e=a.getData();e&&e.length&&d.call(c,e);a.addEventListener("loadSources",b);this.addEventListener("beforeDestroy",function(){a.removeEventListener("loadSources",b)});a.addEventListener("clear",function(){c.removeItems()})},cacheCount:0,
close:function(){this.currentItem&&(this.selectItem(null),this.triggerEvent("close"))},destroy:function(){this.triggerEvent("beforeDestroy");this.disableKeyboard();this.transition.destroy()},disableKeyboard:function(){a(document).off("keydown.modules",c)},enableKeyboard:function(){a(document).on("keydown.modules",{view:this},c)},first:function(){if(!this.currentItem)return!1;this.selectItem(0)},items:[],init:function(){var b=this;this.options.margin=yox.utils.dimensions.distributeMeasures(this.options.margin);
this.options.padding=yox.utils.dimensions.distributeMeasures(this.options.padding);var d=this.options.eventsHandler||new yox.eventsHandler;a.extend(this,d);for(var c in this.options.events)if(d=this.options.events[c],d instanceof Array)for(var g=0;g<d.length;g++)b.addEventListener(c,d[g]);else b.addEventListener(c,d);"static"===this.$container.css("position")&&this.$container.css("position","relative");a.extend(this,{getPosition:yox.utils.dimensions.resize[this.options.resizeMode],elements:{}});e.call(this,
this.options.transition);this.options.data&&this.addDataSources(this.options.data);this.options.enableKeyboard&&this.enableKeyboard();if(this.options.controls)for(var i in this.options.controls)if(this[i])a(this.options.controls[i]).data("yoxviewControl",i).on("click",function(d){d.preventDefault();b[a(this).data("yoxviewControl")].call(b)});this.update();this.triggerEvent("create")},last:function(){if(!this.currentItem)return!1;this.selectItem(this.items.length-1)},next:function(a){if(!this.currentItem)return!1;
this.direction=1;this.selectItem(this.currentItem.id===this.items.length?0:this.currentItem.id,void 0,a)},option:function(b,d){var c;void 0===d&&Object(b)===b?c=b:(c={},c[b]=d);for(var e in c){var g=this.options[e],h=c[e];if(g!==h){var i=k[e];i&&i.call(this,h,g)}}this.transition.update&&this.transition.update.call(this,c);a.extend(!0,this.options,c)},toggleSlideshow:function(){var a=this;this.isPlaying?(clearTimeout(this.playTimeoutId),this.isPlaying=!1,this.triggerEvent("slideshowStop")):(this.isPlaying=
!0,this.playTimeoutId=setTimeout(function(){a.next.call(a,!0)},this.options.slideshowDelay),this.triggerEvent("slideshowStart"))},prev:function(){if(!this.currentItem)return!1;this.direction=-1;this.selectItem(1===this.currentItem.id?this.items.length-1:this.currentItem.id-2)},removeItems:function(){this.triggerEvent("removeItems",this.items);this.currentItem=void 0;this.items=[]},removeEventListener:function(b,d){if(d&&"function"!==typeof d)throw Error("Invalid event handler, must be a function or undefined.");
a(this.container).off(b+".modules",d)},selectItem:function(b,d,c){!c&&this.isPlaying?this.toggleSlideshow():c&&!this.isPlaying&&(this.isPlaying=!0,this.triggerEvent("slideshowStart"));if(!isNaN(b)){if(b>=this.items.length||0>b)throw Error("Invalid item index: "+b);b=this.items[b]}if(""+b===b){for(var c=0,e;e=this.items[c];c++)if(e.name&&e.name===b){b=e;break}e=null}else b instanceof HTMLElement&&(b=a(b)),b instanceof jQuery&&(c=b.data("yoxviewIndex"),isNaN(c)&&(c=parseInt(b.attr("data-yoxviewIndex"),
10)),b=this.items[c]);var c=this.currentItem,g=this;if(c&&b&&b.id===c.id)return!1;this.triggerEvent("beforeSelect",{newItem:b,oldItem:c,data:d});(this.currentItem=b)?(g.options.showThumbnailsBeforeLoad&&i.call(g,b,!0),this.cache.withItem(b,this,function(a){i.call(g,a)})):i.call(g,b);return!0},unload:function(){},update:function(a){this.options.transitionTime&&this.updateTransitionTimeoutId&&(clearTimeout(this.updateTransitionTimeoutId),this.updateTransitionTimeoutId=null);var b={width:this.$container.width(),
height:this.$container.height()};if(a||!this.containerDimensions||b.width!==this.containerDimensions.width||b.height!==this.containerDimensions.height)this.containerDimensions=b,this.currentItem&&this.transition.transition.call(this,{position:this.getPosition(this.currentItem,this.containerDimensions,this.options),duration:0,isUpdate:!0})}}}();yox.view.config={defaults:{cacheImagesInBackground:!0,enableKeyPresses:!0,enlarge:!1,keyPress:{left:"prev",right:"next",up:"prev",down:"next",escape:"close",
home:"first",end:"last",enter:"toggleSlideshow"},events:{init:function(){this.options.cacheImagesInBackground&&this.items.length&&yox.view.cache.cacheItem(this);this.removeEventListener("init")},select:function(){var a=this;this.isPlaying&&(this.playTimeoutId=setTimeout(function(){a.next.call(a,!0)},Number(this.options.slideshowDelay)+Number(this.options.transitionTime||0)))}},container:document.body||document.getElementsByTagName("body")[0],panelDimensions:{width:1600,height:1600},resizeMode:"fit",
showThumbnailsBeforeLoad:!1,slideshowDelay:3E3},mode:{fill:{transition:"fade",enlarge:!0,margin:0,padding:0},fit:{transition:"morph"}},platform:{mobile:{cacheBuffer:2,margin:0,padding:0,showInfo:!0,transitionTime:0},desktop:{cacheBuffer:5,margin:20,padding:0,showInfo:!0,transitionTime:300}}}})(jQuery);
yox.view.cache=function(){function a(a,b){var e=!0;d++;b&&++a.cacheCount===a.items.length&&(delete a.cacheCount,a.isLoaded=!0,e=!1);e&&(e=d+o<a.options.cacheBuffer);e&&c(a)}function b(b){if(!this.width||!this.height)return!1;var b=k[n=b.data.cacheImageIndex],d=b.item,c=b.view;d.width=this.width;d.height=this.height;d.ratio=this.height/this.width;d.isLoaded=!0;d.id===l&&(c.triggerEvent("cacheEnd",d),l=null);c.triggerEvent("loadItem",d);b.onCache&&(b.onCache.call(c,d),b.onCache=null);o--;delete b.item;
a(c,!0)}function c(a){var b=a.items.length,d=g+a.direction;d===b?d=0:-1===d&&(d+=b);e(a,a.items[d],null,f)}function e(b,e,h){if(!(b instanceof yox.view))throw new TypeError("Invalid view for cacheItem.");if(!b)throw Error("View is required for cacheItem.");if(4>arguments.length||arguments[3]!==f)d=0;e=e||b.items[0];if("image"!==e.type)return h&&h.call(b,e),!0;for(var m=0;m<i;m++){var l=k[m];if(l.view&&l.view.id===b.id&&l.item&&l.item.id===e.id&&h)return l.onCache=h,!0}g=e.id-1;!e.isLoaded&&"image"===
e.type?(l=k[n],l.item=e,l.view=b,$.browser.mozilla&&(l.img.src=""),h&&(l.onCache=h),l.img.src=e.url,o++,++n===k.length&&(n=0),o<i&&d+o<b.options.cacheBuffer&&c(b)):(a(b,!e.isLoaded),e.isLoaded=!0,h&&h.call(b,e));return!0}for(var g,d=0,i=2,k=[],n=0,f=(new Date).valueOf(),o=0,m,l,q=0;q<i;q++){var h=new Image;h.setAttribute("data-id",q);$(h).on("load",{cacheImageIndex:q},b).on("error",function(){console.error("Image not found or couldn't load:",this.src)});k.push({img:h})}return{cacheItem:e,withItem:function(b,
c,h){if(3>arguments.length||arguments[2]!==f)d=0;b.isLoaded?(h.call(c,b),l&&(c.triggerEvent("cacheEnd",b),l=null),g=b.id-1,c.isLoaded||a(c,!1)):(m&&clearTimeout(m),m=setTimeout(function(){b.isLoaded||(m=null,c.triggerEvent("cacheStart",b),l=b.id)},200),e(c,b,h,f))}}}();yox.view.transition=function(a){this.name=a};yox.view.transitions={};
yox.view.transition.prototype={create:function(){throw Error("'create' method isn't implemented for this transition type.");},destroy:function(){throw Error("'destroy' method isn't implemented for this transition type.");},getCurrentPanel:function(){throw Error("'getCurrentPanel' method isn't implemented for this transition type.");},getPanel:function(){throw Error("'getPanel' method isn't implemented for this transition type.");},transition:function(){throw Error("'transition' method isn't implemented for this transition type.");
},update:function(){}};
yox.view.transitions.evaporate=function(){function a(a){e=a;g=a+"ms";k=yox.utils.browser.getCssPrefix()+"transform "+g+" ease-out, opacity "+g+" ease-out"}var b,c=1,e,g,d=0,i=this,k,n;this.create=function(d){i.$container=d;d.css("perspective","800px");a(this.options.transitionTime);b=[];for(var c=0;2>c;c++){var e=$("<div>",{"class":"yoxviewImg"});e.css({position:"absolute",top:"50%",left:"50%",width:0,height:0,border:"solid 1px #666",transform:c?"translateZ(-500px)":"translateZ(0)"});e.attr("data-index",
c);b.push(e.appendTo(d))}};this.destroy=function(){i.$container.css("perspective","");for(var a=0;a<b.length;a++)b[a].remove()};this.getCurrentPanel=function(){return b[c]};this.getPanel=function(){c=c?0:1;return b[c]};this.transition=function(a){clearTimeout(n);var g=i.getCurrentPanel(),m=b[c?0:1].show(),l=a.index<d&&!(d===this.items.length-1&&0===a.index)||a.index===this.items.length-1&&!d;g.css($.extend(a.position,{display:"block",transform:l?"translateZ(500px)":"translateZ(-800px)",transition:"none",
zIndex:l?3:1}));setTimeout(function(){m.css({transform:l?"translateZ(-800px)":"translateZ(500px)",opacity:0,zIndex:l?1:3});g.css({transition:k,transform:"translateZ(0)",zIndex:2,opacity:1});d=a.index;l||(n=setTimeout(function(){m.hide()},e))},10)};this.update=function(d){if(void 0!==d.transitionTime){a(d.transitionTime);for(d=b.length;d--;)b[d].css("transitionDuration",g)}}};yox.view.transitions.evaporate.prototype=new yox.view.transition("evaporate");
yox.view.transitions.fade=function(){var a,b=1;this.create=function(b){a=[];for(var e=0;2>e;e++){var g=$("<div>",{src:"","class":"yoxviewImg"});0<e&&g.css({opacity:"0"});g.css({transition:["opacity ",this.options.transitionTime,"ms linear"].join("")});$.browser.webkit&&g[0].style.setProperty("-webkit-transform","translateZ(0)");a.push(g.appendTo(b))}};this.destroy=function(){for(var b=0;b<a.length;b++)a[b].remove()};this.getCurrentPanel=function(){return a[b]};this.getPanel=function(){b=b?0:1;return a[b]};
this.transition=function(c){if(void 0!==c.duration){if(isNaN(c.duration))throw new TypeError("Invalid value for transition time, must be a number (in milliseconds).");}else c.duration=void 0;a[b].css(c.position);this.options.enlarge&&"fill"===this.options.resizeMode?a[1].css({opacity:b}):(a[b?0:1].css({opacity:0}),a[b].css({opacity:1}))};this.update=function(c){c.resizeMode&&c.resizeMode!==this.options.resizeMode&&a[b].css(this.getPosition(this.currentItem,this.containerDimensions,this.options));
if(void 0!==c.transitionTime)for(var e=a.length;e--;)a[e].css("transitionDuration",c.transitionTime+"ms")}};yox.view.transitions.fade.prototype=new yox.view.transition("fade");
yox.view.transitions.flip=function(){var a,b,c=1,e,g=-180,d=0,i=this;this.create=function(d){i.$container=d;d.css("perspective","800px");a=$("<div>",{"class":"yoxviewFrame yoxviewFrame_"+this.options.resizeMode+" yoxviewFrame_"+yox.utils.browser.getPlatform()+" yoxviewFrame_flip"}).appendTo(d);this.options.transitionTime&&(e=this.options.transitionTime,a.css({transition:yox.utils.browser.getCssPrefix()+"transform "+e+"ms ease-out",transformStyle:"preserve-3d",width:d.width()-this.options.margin.horizontal,
left:this.options.margin.left,height:"100%",border:"none",overflow:"visible"}));b=[];for(d=0;2>d;d++){var c=$("<div>",{"class":"yoxviewImg"});c.css({backfaceVisibility:"hidden",background:"Black",position:"absolute",top:"50%",left:"50%",width:0,height:0,transform:d?"rotateY(180deg)":"rotateY(0)",marginLeft:"-"+this.options.margin.left+"px"});c.attr("data-index",d);b.push(c.appendTo(a))}};this.destroy=function(){i.$container.css("perspective","");a.remove()};this.getCurrentPanel=function(){return b[c]};
this.getPanel=function(){c=c?0:1;return b[c]};this.transition=function(b){i.getCurrentPanel().css(b.position);b.isUpdate?a.css({width:i.$container.width()-this.options.margin.horizontal,left:this.options.margin.left}):(g+=b.index<d&&!(d===this.items.length-1&&0===b.index)||b.index===this.items.length-1&&!d?-180:180,d=b.index,a.css("transform","rotateY("+g+"deg)"))};this.update=function(b){void 0!==b.transitionTime&&a.css("transitionDuration",b.transitionTime+"ms")}};
yox.view.transitions.flip.prototype=new yox.view.transition("flip");
yox.view.transitions.morph=function(){var a,b,c=1,e,g;this.create=function(d){a=$("<div>",{"class":"yoxviewFrame yoxviewFrame_"+this.options.resizeMode+" yoxviewFrame_"+yox.utils.browser.getPlatform()}).appendTo(d);this.options.transitionTime&&(g=e=this.options.transitionTime,a.css({transition:"all "+e+"ms ease-out",top:"50%",left:"50%",width:0,height:0}),$.browser.webkit&&a[0].style.setProperty("-webkit-transform","translateZ(0)"));b=[];for(d=0;2>d;d++){var c=$("<div>",{"class":"yoxviewImg"});c.css("display",
"inline");0<d&&c.css({opacity:"0"});c.css({transition:["all ",this.options.transitionTime,"ms ease-out"].join("")});$.browser.webkit&&c[0].style.setProperty("-webkit-transform","translateZ(0)");c.attr("data-index",d);b.push(c.appendTo(a))}};this.destroy=function(){a.remove()};this.getCurrentPanel=function(){return b[c]};this.getPanel=function(){c=c?0:1;return b[c]};this.transition=function(d){var i=$.extend({},d.position);if(void 0!==d.duration){if(isNaN(d.duration))throw new TypeError("Invalid value for transition time, must be a number (in milliseconds).");
}else d.duration=e;d.duration!==g&&(i.transition="all "+d.duration+"ms ease-out",g=d.duration);d.isUpdate||b[1].css("opacity",c);a.css(i)};this.update=function(d){if(void 0!==d.transitionTime){a.css("transitionDuration",d.transitionTime+"ms");for(var c=b.length;c--;)b[c].css("transitionDuration",d.transitionTime+"ms")}}};yox.view.transitions.morph.prototype=new yox.view.transition("morph");
yox.view.transitions.thumbnails=function(){function a(a){return function(){a.css("visibility","visible")}}function b(b){clearTimeout(f);clearTimeout(o);var l=c[e],n=c[e?0:1];if(b.isUpdate)l.css(b.position);else{if(b.item){var h=$(b.item.thumbnail.image),p=h.offset();p.top-=k.scrollTop;p.left-=k.scrollLeft;l.show().css($.extend({transition:"none","z-index":i+1},p,{width:h.width(),height:h.height()}));f=setTimeout(function(){l.css($.extend({transition:"all "+g+"ms ease-out"},b.position))},5)}n&&d&&
(p=d.offset(),p.top-=k.scrollTop,p.left-=k.scrollLeft,n.css($.extend({"z-index":i},p,{width:d.width(),height:d.height()})),o=setTimeout(function(){n.hide()},g),setTimeout(a(d),g));(d=h)&&d.css("visibility","hidden")}}var c,e=1,g,d,i=100,k;this.create=function(a){function b(){var c=$("<div>",{"class":"yoxviewFrame yoxviewFrame_"+d.options.resizeMode+" yoxviewFrame_"+yox.utils.browser.getPlatform(),css:{transition:"all "+g+"ms ease-out",display:"none","box-sizing":"border-box",position:"fixed"}}).appendTo(a);
$.browser.webkit&&c[0].style.setProperty("-webkit-transform","translateZ(0)");a.append(c);return c}var d=this;g=this.options.transitionTime;c=[];for(var e=0;2>e;e++)c.push(b(e));for(k=a[0];!~["scroll","auto"].indexOf(window.getComputedStyle(k,null).overflow)&&k.parentNode&&k!==document.documentElement;)k=k.parentNode};this.destroy=function(){for(var a=0;a<c.length;a++)c[a].remove();c=[]};this.getCurrentPanel=function(){return c[e]};this.getPanel=function(){e=e?0:1;return c[e]};var n=yox.utils.performance.throttle(b,
120),f,o;this.transition=function(a){a.isUpdate?n.call(this,a):b.call(this,a)};this.update=function(){}};yox.view.transitions.thumbnails.prototype=new yox.view.transition("thumbnails");yox.theme=function(){};yox.themes={};
yox.theme.prototype={create:function(){throw Error("'create' method is not implemented for this theme.");},destroy:function(){throw Error("'destroy' method is not implemented for this theme.");},getThemeClass:function(a){return"yox-theme-"+this.name+(a?"-"+a:"")},init:function(a,b,c,e){function g(a,d,e){e.data=b;e.eventsHandler={addEventListener:function(a,b){c.addEventListener(a,b.bind(this))},triggerEvent:function(a,b,e){c.triggerEvent.call(this,a+"."+d,b,e||this)}};return new n(a,e)}if(!(b instanceof
yox.data))throw Error("Invalid data provided for theme, must be an instance of yox.data.");$.extend(this,c);this.create(a);var d=$.extend(!0,{},this.config,e.modules),i;for(i in d){var k=d[i],n=yox[i];if(!n)throw Error("Module not found: '"+i+"', can't create theme '"+this.name+"'.");var f=$(".yox"+i,a);if(k instanceof Array){this.modules[i]=[];for(var o=0;e=k[o];o++)this.modules[i].push(g(f[o],i,e))}else this.modules[i]=g(f[0],i,k)}},config:{},modules:{}};
yox.themes.classic=function(a,b){function c(){}function e(a){var b=$(a);b.toggleClass("yox-theme-classic-button-on");q.triggerEvent("toggle",{action:a.innerHTML,state:b.hasClass("yox-theme-classic-button-on")})}function g(){s&&(r=!r);r?(q.modules.view.option("resizeMode","fit"),h.gallery.style.cursor="none",h.gallery.style.height=document.documentElement.clientHeight-(u?b.thumbnailsHeight:0)+"px"):(h.gallery.style.height=y+"px",h.gallery.style.cursor="default");var a=$(window),d=r?a.on:a.off;d.call(a,
"mousemove",n);s||d.call($(document),"keydown",k);t=!1;i();e(z.fullscreen)}function d(){t=!0;s?r?document.cancelFullScreen():(h.themeContents.style.height="100%",h.themeContents.requestFullScreen()):(r=!r,h.themeContents.style.position=r?"fixed":"relative",h.themeContents.style.height=r?"100%":y,h.themeContents.style.border=r?"none":"solid 1px Black",h.themeContents.style.zIndex=r?"100":"1",g(),q.modules.scroll.updateSize())}function i(){if(t)return!1;f();q.modules.view.update(!0)}function k(a){27===
a.keyCode&&d()}function n(a){if(!w||a.pageX<w.x-3||a.pageX>w.x+3||a.pageY<w.y-3||a.pageY>w.y+3)clearTimeout(p),h.controlsPanel.style.opacity="1",h.gallery.style.cursor="default",p=setTimeout(function(){var b=h.controlsPanel.getClientRects()[0];a.pageY>=b.top&&a.pageY<=b.bottom&&a.pageX>=b.left&&a.pageX<=b.right||(h.controlsPanel.style.opacity="0",h.gallery.style.cursor="none")},1E3);w={x:a.pageX,y:a.pageY}}function f(){var a=r?document.documentElement.clientHeight:h.container.clientHeight;u&&(a-=
b.thumbnailsHeight);h.gallery.style.height=a+"px"}function o(){i();q.triggerEvent("resize")}function m(a){var b=document.createElement("a");b.innerHTML=a.title;b.className=q.getThemeClass("button")+" "+q.getThemeClass("button-"+a.action);b.setAttribute("data-action",a.action);return b}function l(a){var b=document.createElement("a"),d=q.getThemeClass("controlBtn");b.setAttribute("data-method",a);b.className=d+" "+d+"-"+a;b.innerHTML="<div></div>";return b}var q=this,h,p,r,s,t,y,w,x=b.showInfo,u=b.showThumbnails,
z={},v=a.countItems(),A={fullscreen:d,info:function(a){x=!x;h.infoPanel.style.opacity=x?"1":"0";e(a)},slideshow:function(){q.modules.view.toggleSlideshow()},thumbnails:function(a){u=!u;h.gallery.style.height=h.gallery.clientHeight+b.thumbnailsHeight*(u?-1:1)+"px";q.modules.view.update();e(a)}};this.name="classic";this.config={view:{enableKeyboard:!0,enlarge:!0,resizeMode:"fit",transition:yox.view.transitions.fade,transitionTime:300,margin:0,events:{cacheStart:function(){h.loader.style.display="inline"},
cacheEnd:function(){h.loader.style.display="none"},"click.thumbnails":function(a){this.selectItem(a.index,"scroll")},"init.view":function(){this.selectItem(this.options.firstItem||0);h.infoPanel.style.opacity="1"},slideshowStart:function(){e(z.slideshow)},slideshowStop:function(){e(z.slideshow)},beforeSelect:function(a){h.infoText.innerHTML=a.newItem.title||"";h.infoPosition.innerHTML=a.newItem.id;b.showCopyright&&(a.newItem.author?(h.copyright.href=a.newItem.author.link||a.newItem.link,h.copyright.innerHTML=
"&copy; "+(a.newItem.author.name||a.newItem.author)):h.copyright.innerHTML="")}}},thumbnails:{events:{beforeSelect:function(a){this.select(a.newItem.id-1)},loadItem:function(a){$(this.thumbnails[a.id-1]).addClass("loaded")},"create.thumbnails":function(){this.select(0)}}},scroll:{events:{"create.thumbnails":function(){this.update()},"select.thumbnails":function(a){this.scrollTo(a,{centerElement:!0,time:0.5})},resize:function(){this.updateSize()},beforeSelect:function(a){var b=a.newItem.id-1;q.modules.thumbnails.thumbnails&&
this.scrollTo(q.modules.thumbnails.thumbnails[b],{centerElement:!a.data})}},pressedButtonClass:"enabledThumbnailsButton"},statistics:{category:"yox.js Classic theme",events:{toggle:function(a){this.report({action:"Toggle",label:a.action,value:a.state?1:0})},"page.scroll":function(a){this.report({action:"Page thumbnails",value:a.direction})}}}};a.addEventListener("loadSources",function(){h.infoItemsCount.innerHTML=a.countItems();$(h.container).removeClass(q.getThemeClass("loading"))});a.addEventListener("loadSourcesStart",
function(){$(h.container).addClass(q.getThemeClass("loading"))});!1!==b.enableFullScreen&&(document.cancelFullScreen=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||c,HTMLElement.prototype.requestFullScreen=HTMLElement.prototype.requestFullScreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.webkitRequestFullScreen||c,s=document.cancelFullScreen!==c);!1!==b.enableFullScreen&&s&&document.addEventListener(document.mozCancelFullScreen?"mozfullscreenchange":
"webkitfullscreenchange",g,!1);this.create=function(d){$(d).addClass(this.getThemeClass()+(a.isLoading?" "+this.getThemeClass("loading"):""));h={container:d,themeContents:document.createElement("div"),gallery:document.createElement("div"),viewer:document.createElement("div"),thumbnails:document.createElement("div"),thumbnailsPanel:document.createElement("div"),loader:document.createElement("div"),description:document.createElement("p"),controlsPanel:document.createElement("div"),controls:[],infoPanel:document.createElement("div"),
info:document.createElement("div"),infoText:document.createElement("div"),infoPosition:document.createElement("span"),infoItemsCount:document.createElement("span")};h.$thumbnails=$(h.thumbnails);var c=this.getThemeClass("thumbnailsBtn");h.thumbnailsPanel.className=this.getThemeClass("thumbnailsPanel");h.thumbnailsPanel.style.height=b.thumbnailsHeight-1+"px";h.thumbnailsPanel.innerHTML='<a href="#" class="'+c+" "+c+'_left" data-yoxscroll-holdstart="scroll-left" data-yoxscroll-click="page-left"></a><a href="#" class="'+
c+" "+c+'_right" data-yoxscroll-holdstart="scroll-right" data-yoxscroll-click="page-right"></a>';h.thumbnailsPanel.appendChild(h.thumbnails);this.config.scroll.elements=$("a",h.thumbnailsPanel);h.themeContents.appendChild(h.gallery);h.themeContents.className=this.getThemeClass("contents");d.appendChild(h.themeContents);h.gallery.appendChild(h.viewer);h.gallery.appendChild(h.description);h.themeContents.appendChild(h.thumbnailsPanel);h.gallery.appendChild(h.loader);h.viewer.className=this.getThemeClass("viewer")+
" yoxview";h.gallery.className=this.getThemeClass("gallery");h.thumbnails.className=this.getThemeClass("thumbnails")+" yoxthumbnails yoxscroll";h.thumbnails.style.height=b.thumbnailsHeight+"px";h.loader.className=this.getThemeClass("loader")+" yoxloader";h.description.className=this.getThemeClass("description");h.controlsPanel.className=this.getThemeClass("controls");for(var d=[{title:"Fullscreen",action:"fullscreen"},{title:"Slideshow",action:"slideshow"},{title:"Info",action:"info"},{title:"Thumbnails",
action:"thumbnails"}],c=0,g;g=d[c];c++)h.controlsPanel.appendChild(z[g.action]=m(g));$(h.controlsPanel).on("click","a",function(a){a.preventDefault();A[this.getAttribute("data-action")](this)});h.gallery.appendChild(h.controlsPanel);b.showInfo?e(z.info):h.infoPanel.style.opacity="0";b.showThumbnails&&e(z.thumbnails);d=document.createElement("div");d.className=this.getThemeClass("info-position");d.appendChild(h.infoPosition);d.appendChild(document.createTextNode(" / "));h.infoItemsCount.innerHTML=
v;h.infoPosition.innerHTML="0";d.appendChild(h.infoItemsCount);h.info.appendChild(d);h.infoText.className=this.getThemeClass("info-text");h.info.appendChild(h.infoText);b.showCopyright&&(h.copyright=document.createElement("a"),h.copyright.target="_blank",h.copyright.className=this.getThemeClass("copyright"),h.info.appendChild(h.copyright));h.infoPanel.appendChild(h.info);h.gallery.appendChild(h.infoPanel);h.infoPanel.className=this.getThemeClass("infoPanel");h.info.className=this.getThemeClass("info");
h.gallery.appendChild(l("prev"));h.gallery.appendChild(l("next"));y=h.gallery.clientHeight;f();$(h.gallery).on("mousemove",n).on("click","."+this.getThemeClass("controlBtn"),function(){q.modules.view[this.getAttribute("data-method")]()});$(window).on("resize",o)};this.destroy=function(){$(h.container).removeClass(this.getThemeClass());h.container.removeChild(h.themeContents);h=null;clearTimeout(p);$(window).off("resize",o)}};
yox.themes.classic.defaults={showCopyright:!1,showInfo:!0,showThumbnails:!0,thumbnailsHeight:61};yox.themes.classic.prototype=new yox.theme;
yox.themes.inline=function(a,b){function c(){}function e(){l&&(m=!m);m?(o=setTimeout(function(){f.$thumbnails.css({opacity:0});document.body.style.cursor="none"},3E3),n.modules.view.option("resizeMode","fit")):(clearTimeout(o),f.$thumbnails.css("opacity","1"),f.gallery.style.height=q+"px",document.body.style.cursor="default",n.modules.view.option("resizeMode","fill"));d();var a=$(window),b=m?a.on:a.off;b.call(a,"mousemove",k);l||b.call($(document),"keydown",i)}function g(){l?m?document.cancelFullScreen():
(f.gallery.style.height="100%",f.gallery.requestFullScreen()):(m=!m,f.gallery.style.position=m?"fixed":"relative",f.gallery.style.height=m?"100%":q,f.gallery.style.border=m?"none":"solid 1px Black",f.gallery.style.zIndex=m?"100":"1",e())}function d(){n.modules.view.update(!0);h=f.thumbnails.getClientRects()[0]}function i(a){27===a.keyCode&&g()}function k(a){if(!p||a.pageX<p.x-4||a.pageX>p.x+4||a.pageY<p.y-4||a.pageY>p.y+4)clearTimeout(o),f.$thumbnails.css("opacity","1"),document.body.style.cursor=
"default",o=setTimeout(function(){a.pageY>=h.top||(f.$thumbnails.css({opacity:0}),document.body.style.cursor="none")},2E3);p={x:a.pageX,y:a.pageY}}var n=this,f,o,m,l,q,h,p;this.name="inline";this.config={view:{enableKeyboard:!0,enlarge:!0,resizeMode:"fill",transition:"fade",transitionTime:300,events:{cacheStart:function(){f.loader.style.display="inline"},cacheEnd:function(){f.loader.style.display="none"},"click.thumbnails":function(a){this.selectItem(a.index)},"init.view":function(){this.selectItem(0)}}},
thumbnails:{events:{beforeSelect:function(a){this.select(a.newItem.id-1)},loadItem:function(a){$(this.thumbnails[a.id-1]).addClass("loaded")},"create.thumbnails":function(){this.select(0)}}}};document.cancelFullScreen=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||c;HTMLElement.prototype.requestFullScreen=HTMLElement.prototype.requestFullScreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.webkitRequestFullScreen||c;(l=document.cancelFullScreen!==
c)&&document.addEventListener(document.mozCancelFullScreen?"mozfullscreenchange":"webkitfullscreenchange",e,!1);this.create=function(a){$(a).addClass(this.getThemeClass());f={container:a,title:document.createElement("h2"),gallery:document.createElement("div"),viewer:document.createElement("div"),thumbnails:document.createElement("div"),loader:document.createElement("loader"),description:document.createElement("p")};f.$thumbnails=$(f.thumbnails);a.appendChild(f.title);a.appendChild(f.gallery);a.appendChild(f.description);
f.gallery.appendChild(f.viewer);f.gallery.appendChild(f.thumbnails);f.gallery.appendChild(f.loader);f.viewer.className=this.getThemeClass("viewer")+" yoxview";f.title.className=this.getThemeClass("title");f.gallery.className=this.getThemeClass("gallery");f.thumbnails.className=this.getThemeClass("thumbnails")+" yoxthumbnails";f.loader.className=this.getThemeClass("loader")+" yoxloader";f.description.className=this.getThemeClass("description");b.title&&(f.title.innerHTML=b.title);q=f.gallery.clientHeight;
h=f.thumbnails.getClientRects()[0];$(f.gallery).on("dblclick",g);$(window).on("resize",d)};this.destroy=function(){$(f.container).removeClass(this.getThemeClass());f.container.removeChild(f.title);f.container.removeChild(f.gallery);f.container.removeChild(f.description);f=null;$(window).off("resize",d)}};yox.themes.inline.prototype=new yox.theme;
yox.themes.lightbox=function(){var a,b,c=this;this.name="lightbox";this.config={view:{enableKeyboard:!0,enlarge:!1,resizeMode:"fit",transition:yox.view.transitions.morph,transitionTime:300,margin:30,events:{"init.view":function(){this.selectItem(this.options.firstItem||0)}}}};this.create=function(e){a=document.createElement("div");b=document.createElement("div");a.className=this.getThemeClass("background");b.className=this.getThemeClass("view")+" yoxview";e.appendChild(a);e.appendChild(b);$(window).on("resize",
function(){c.modules.view.update()})}};yox.themes.lightbox.defaults={margin:30};yox.themes.lightbox.prototype=new yox.theme;
yox.themes.scroll=function(a,b){function c(){e.triggerEvent("resize")}var e=this;this.name="scroll";this.config={thumbnails:[{id:"scroller",useFullImages:!0,events:{beforeSelect:function(a){this.select(a.newItem.id-1)},"select.view":function(a){e.triggerEvent("select.thumbnails",this.thumbnails[a.id-1],"scroller")}}},{id:"thumbnails",events:{beforeSelect:function(a){this.select(a.newItem.id-1)},loadItem:function(a){$(a.thumbnail.element).addClass("loadedThumbnail")}}}],scroll:{events:{"create.thumbnails":function(a,
b){b instanceof yox.scroll&&this.update()},"select.thumbnails":function(a){this.scrollTo(a,{centerElement:!0,time:0.5})},resize:function(){this.updateSize()}},toggleButtons:!1},view:{delayOpen:!0,enableKeyboard:!0,events:{"click.thumbnails":function(a,b){"thumbnails"===b&&this.selectItem(a.index)},"click.scroll":function(a){this.selectItem(a.target.parentNode,"yoxscroll")}}}};var g;this.create=function(a){"static"===$(a).css("position")&&a!==document.body&&(a.style.position="relative");a.style.overflow=
"hidden";g=document.createElement("div");g.className=this.getThemeClass("wrapper");var e=document.createElement("div");e.className=this.getThemeClass("scroller")+" yoxview yoxthumbnails yoxscroll ";g.appendChild(e);a.appendChild(g);!1!==b.renderThumbnails&&(a=document.createElement("div"),a.className=this.getThemeClass("thumbnails")+" thumbnails yoxthumbnails",g.appendChild(a));a=document.createElement("div");a.className=this.getThemeClass("loader")+" yoxloader";g.appendChild(a);$(window).on("resize",
c)};this.destroy=function(){g.parentNode.removeChild(g);g=null;$(window).off("resize",c)}};yox.themes.scroll.prototype=new yox.theme;
yox.themes.slideshow=function(){var a,b,c,e,g=this;this.name="slideshow";this.config={view:{enableKeyboard:!0,transition:"flip",margin:10,transitionTime:600,events:{beforeSelect:function(b){a.innerHTML=b.newItem.id+" / "+this.items.length},create:function(){this.selectItem(0)}}}};this.create=function(d){function i(a,b){var c=document.createElement("a");c.className=g.getThemeClass("button")+" "+g.getThemeClass("button-"+a);c.setAttribute("data-method",a);c.setAttribute("href","#");c.textContent=b;
return c}b=d;$(d).addClass(this.getThemeClass());c=document.createElement("div");c.className=this.getThemeClass("viewer")+" yoxview";d.appendChild(c);e=document.createElement("div");e.className=this.getThemeClass("controls");d.appendChild(e);e.appendChild(i("first","First"));e.appendChild(i("prev","Previous"));d=document.createElement("span");d.className=this.getThemeClass("position");a=d;e.appendChild(d);e.appendChild(i("next","Next"));e.appendChild(i("last","Last"));$(e).on("click","a",function(a){a.preventDefault();
g.modules.view[this.getAttribute("data-method")]()})};this.destroy=function(){b.removeChild(e);b.removeChild(c);$(b).removeClass(this.getThemeClass())}};yox.themes.slideshow.prototype=new yox.theme;
yox.themes.switcher=function(){function a(){c.modules.view.update()}var b,c=this,e=!1;this.name="switcher";this.config={view:{enableKeyboard:!0,enlarge:!1,resizeMode:"fit",transition:yox.view.transitions.thumbnails,transitionTime:300,margin:30,showThumbnailsBeforeLoad:!0,events:{"click.thumbnails":function(a,b){a.isSelected?(this.close(),b.unselect()):this.selectItem(a.index)},beforeSelect:function(a){!e&&a.newItem&&(e=!0,$(b.container).addClass(c.getThemeClass("open")))},close:function(){c.modules.view.close();
e=!1;$(b.container).removeClass(c.getThemeClass("open"))}}}};this.create=function(e){b={background:document.createElement("div"),view:document.createElement("div"),container:e};b.background.className=this.getThemeClass("background");b.view.className=this.getThemeClass("view")+" yoxview";e.appendChild(b.background);e.appendChild(b.view);$(window).on("resize",a);$(b.view).on("click","img",function(){c.modules.view.next()})};this.destroy=function(){b.container.removeChild(b.background);b.container.removeChild(b.view);
$(window).off("resize",a);$(b.container).removeClass(c.getThemeClass("open"));b=null}};yox.themes.switcher.defaults={scrollDuration:500};yox.themes.switcher.prototype=new yox.theme;
yox.themes.wall=function(a,b){var c,e;function g(a,c,d,e){q+=a.dimensions.width;l.push(a);var c=c===d-1,f=(l.length-1)*b.borderWidth;if((d=q+f>=k)||c){var e=(k-f)/q,g=Math.round(l[0].dimensions.height*e),h=!0,i=d||o;g>b.thumbnailsMaxHeight&&(g=b.thumbnailsMaxHeight,h=!1);for(var n=0,m;m=l[n];n++){var p=Math.floor(m.dimensions.width*e),f=f+p;m.style.height=g+"px";h?m.style.width=p+"px":c&&(m.style.width=m.dimensions.width+"px");i&&m.style.removeProperty("display")}for(e=l.length;e--&&f<k;f++)m=l[e],
m.style.width=parseInt(m.style.width,10)+1+"px";if(!c||d)a.style.marginRight="0",l=[],q=0}else e&&a.style.removeProperty("margin-right")}function d(b){b.length&&(b=b[0],p||(p=b.source,r=b.totalItems,p.type=b.sourceType),a.countItems()>=r&&n.triggerEvent("loadedAllItems"));f=!1;$(c).removeClass(m)}function i(){this.style.visibility="visible";this.style.setProperty(yox.utils.browser.getCssPrefix()+"transform","scale(1)");this.removeEventListener("load",i,!1)}c=void 0;e=void 0;var k,n=this,f,o=!1;this.name=
"wall";var m=this.getThemeClass("loading"),l=[],q=0;this.config={thumbnails:{createThumbnail:function(a,c,d){var e=document.createElement("a"),f=document.createElement("img"),h={height:b.thumbnailsMaxHeight,width:Math.round(b.thumbnailsMaxHeight/c.ratio)};e.dimensions=h;f.addEventListener("load",i,!1);f.src=c.thumbnail.src;e.appendChild(f);e.setAttribute("href",c.url);e.style.display="none";g(e,a,d);return e},events:{beforeSelect:function(a){b.scrollToElementOnSelect&&a.newItem&&yox.utils.dom.scrollIntoView(a.newItem.thumbnail.element,
n.container,b.scrollAnimationDuration,b.scrollOffset)}}}};var h,p,r;d(a.getData());a.addEventListener("loadSources",d);this.create=function(i){function t(){if(!f&&u.scrollTop>=u.scrollHeight-u.clientHeight-b.thumbnailsMaxHeight&&(f=!0,$(c).addClass(m),p)){p.offset=a.countItems()+1;var d=r-p.offset;d<p.pageSize&&(p.pageSize=d);a.addSources([p])}}this.container=i;var y=this.getThemeClass();$(i).addClass(y);c=document.createElement("div");c.className=this.getThemeClass("thumbnails")+" yoxthumbnails";
c.style.padding=b.padding+"px";i.appendChild(c);k=i.clientWidth-2*b.padding;var w=document.createElement("style");w.innerHTML=" ."+y+" a{ "+["margin-right: "+b.borderWidth+"px","margin-bottom: "+b.borderWidth+"px"].join("; ")+" }";document.getElementsByTagName("head")[0].appendChild(w);$(window).on("resize",function(){clearTimeout(h);h=setTimeout(function(){k=i.clientWidth-2*b.padding;l=[];q=0;var a=n.modules.thumbnails.thumbnails;if(a)for(var c=a.length,d=0,e;e=a[d];d++)g(e,d,c,!0)},50)});var x=
i===document.body?document:i,u=i;!$.browser.webkit&&i===document.body&&(u=document.documentElement);e=document.createElement("div");e.className=this.getThemeClass("loader");e.style.paddingBottom=b.borderWidth+b.padding+"px";i.appendChild(e);x.addEventListener("scroll",t,!1);n.addEventListener("loadedAllItems",function(){x.removeEventListener("scroll",t,!1);a.removeEventListener("loadSources",d);o=!0;$(i).addClass(n.getThemeClass("loadedAll"))})}};
yox.themes.wall.defaults={borderWidth:7,loadItemsOnScroll:!1,padding:10,scrollAnimationDuration:500,scrollOffset:60,scrollToElementOnSelect:!1,thumbnailsMaxHeight:200};yox.themes.wall.prototype=new yox.theme;