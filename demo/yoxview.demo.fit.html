<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>YoxView 3.0 Demo</title>
		<link rel="Stylesheet" type="text/css" href="../yoxview/yoxview.css" />
        <link rel="Stylesheet" type="text/css" href="../yoxscroll/yoxscroll.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script type="text/javascript" src="../yoxview/yoxview.js"></script>
        <script type="text/javascript" src="../yoxscroll/jquery.yoxscroll.js"></script>
		<script type="text/javascript" src="../yoxview/datasources/yoxview.data.element.js"></script>
        <script type="text/javascript" src="../yoxview/datasources/yoxview.data.picasa.js"></script>
		<style>
			body{ padding: 0; margin: 0; font-family: Calibri, Arial, Sans-Serif; overflow: hidden;  }
			h1{ font-size: 14pt; color: #fff; margin: 0; padding: 0; display: inline; font-weight: normal }
			header{ height: 35px; line-height: 34px; padding: 0 11px; background: Black; z-index: 2 }
            header a{ color: #aaa; text-decoration: none }
            header a:hover{ color: White }
            #thumbnailsPanel{ height: 60px; background: #000; white-space: nowrap  }
            #thumbnails{ margin: 0 20px; height: 100%; overflow: hidden; }
			#thumbnails a{ opacity: 0.3; }
			#thumbnails img{ height: 100%; border: none}
            #thumbnails a.loadedThumbnail{ opacity: 0.5 }
            #thumbnails a.selectedThumbnail, #thumbnails a:hover { opacity: 1; }
			#thumbnails a.selectedThumbnail img{ opacity: 1 }

            .thumbnailsBtn{
                width: 27px;
                height: 100%;
                background-image: url(img/controls.png);
                background-repeat: no-repeat;
                text-decoration: none;
                line-height: 60px;
                font-weight: bold;
                text-align: center;
                color: #aaa;
                position: absolute;
                z-index: 1;
            }


            #thumbnailsLeft{ left: 0; background-position: 0 -100px; }
            #thumbnailsLeft:hover{ background-position: -27px -100px; }
            #thumbnailsLeft:active, #thumbnailsLeft.enabledThumbnailsButton{ background-position: -54px -100px }
            #thumbnailsRight{ right: 0; background-position: 0 -160px; }
            #thumbnailsRight:hover{ background-position: -27px -160px; }
            #thumbnailsRight:active, #thumbnailsRight.enabledThumbnailsButton{ background-position: -54px -160px }

			#popupContainer{
                background: #0d0d0d;
                overflow: hidden;
            }
			#info{
                background: none repeat scroll 0 0 #0A0A0A;
                border-bottom: 1px solid #282828;
                border-top: 1px solid #151515;
                color: White;
                height: 29px;
                line-height: 28px;
                text-align: left;
            }
            #itemCounter{ color: #666; font-size: 0.8em; float: right; height: 100%; display: block; width: 50px; text-align: center; border-right: solid 1px #000 }
            #infoTitle{ font-size: 12pt; margin: 0; padding: 0 0 0 10px; font-weight: normal;  float: left; height: 100%; display: block;}
            #loader{
                background: url("img/ajax-loader.gif") no-repeat scroll center center White;
                border-radius: 50% 50% 50% 50%;
                box-shadow: 0 0 7px rgba(0, 0, 0, 0.6);
                height: 60px;
                left: 50%;
                margin-left: -30px;
                margin-top: -30px;
                opacity: .6;
                position: absolute;
                top: 50%;
                width: 60px;
                z-index: 20;
                display: none;
            }

            #slideshowBtn{
                border-left: 1px solid #282828;
                color: #666666;
                display: block;
                float: right;
                font-size: 0.8em;
                height: 100%;
                text-align: center;
                text-decoration: none;
                width: 70px;
            }
            #slideshowBtn:hover, #slideshowBtn.slideshowBtn_on{ box-shadow: 0 2px 10px rgba(0,0,0,0.4) inset; color: #ddd; background: #222 }
            #slideshowBtn.slideshowBtn_on{ color: White; }

            .yoxviewControlBtn{
                display: block;
                width: 64px;
                height: 129px;
                top: 50%;
                margin-top: -64px;
                background-image: url(img/controls.png);
                background-repeat: no-repeat;
                position: absolute;
                z-index: 2;
                opacity: .25;
                -moz-transition: opacity 200ms ease-out;
                -webkit-transition: opacity 200ms ease-out;
            }
            .yoxviewControlBtn:hover{ opacity: .6 }
            .yoxviewControlBtn_prev{ background-position: 0px 38px; left: 0; }
            .yoxviewControlBtn_next{ background-position: -68px 38px; right: 0; }
		</style>
	</head>
	<body>
		<header><h1>YoxView 3.0 Demo - Basic usage</h1></header>
		<div id="popupContainer">
            <a href="#" title="Previous" class="yoxviewControlBtn yoxviewControlBtn_prev" id="yoxviewPrev"></a>
            <a href="#" title="Next" class="yoxviewControlBtn yoxviewControlBtn_next" id="yoxviewNext"></a>
            <div id="loader"></div>
		</div>
        <div id="info">
            <h2 id="infoTitle"></h2>
            <a href="#" id="slideshowBtn">Slideshow</a>
            <span id="itemCounter"></span>
        </div>
        <div id="thumbnailsPanel">
            <a href="#" id="thumbnailsLeft" class="thumbnailsBtn" data-yoxscroll-holdstart="scroll-left" data-yoxscroll-click="page-left"></a>
            <a href="#" id="thumbnailsRight" class="thumbnailsBtn" data-yoxscroll-holdstart="scroll-right" data-yoxscroll-click="page-right"></a>
            <div id="thumbnails" class="thumbnails yoxview"></div>
        </div>
		<script type="text/javascript">
			var popupContainer =  document.getElementById("popupContainer"),
                $thumbnailsPanel = $("#thumbnailsPanel"),
                $thumbnailsContainer = $("#thumbnails"),
                $slideshowBtn = $("#slideshowBtn"),
				docElement = document.documentElement,
				info = document.getElementById("info"),
                infoTitle = document.getElementById("infoTitle"),
                loader = document.getElementById("loader"),
                itemCounter = document.getElementById("itemCounter"),
                isInit,
                heightToSubtract = document.getElementsByTagName("header")[0].clientHeight + info.clientHeight + $thumbnailsPanel.height() +2,
                title = document.title;
				
			function setContainerSize(){
                var height = docElement.clientHeight - heightToSubtract;
				popupContainer.style.height = height + "px";
                if (isInit)
                    $thumbnailsContainer.yoxview("update");

			}
			
			setContainerSize();
			
			$(window).resize(function(){
                setContainerSize();
                $thumbnailsContainer.yoxscroll("update");
            });

            $slideshowBtn.on("click", function(e){
                $thumbnailsContainer.yoxview("toggleSlideshow");
            });

			$thumbnailsContainer.yoxview({
				delayOpen: true,
                enableKeyboard: true,
				popupMargin: { top: 10, right: 45, bottom: 10, left: 45 },
                container: popupContainer,
                controls: {
                    prev: $("#yoxviewPrev"),
                    next: $("#yoxviewNext")
                },
                //popupPadding: 20,
                events: {
                    beforeSelect: function(e, items, data){
                        try{
                            $thumbnailsContainer.yoxscroll("scrollTo", items.newItem.thumbnail.element, { centerElement: !data });
                        }
                        catch(e){ }
                    },
                    close: function(){ info.innerHTML = "" },
                    select: function(e, item){
                        infoTitle.innerHTML = item.title || "";
                        itemCounter.innerHTML = [item.id, '/', this.items.length].join("");
                        document.title = title + (item ? " - " + item.title : "");

                    },
                    cacheStart: function(e, item){ loader.style.display = "inline" },
                    cacheEnd: function(e, item){ loader.style.display = "none" },
                    init: function(){ this.selectItem(0); },
                    loadItem: function(e, item){ $(item.thumbnail.element).addClass("loadedThumbnail"); },
                    loadThumbnails: function(e){
                        $thumbnailsContainer.yoxscroll({
                            events: {
                                click: function(e, originalEvent){ $thumbnailsContainer.yoxview("selectItem", originalEvent.target.parentNode, "yoxscroll"); }
                            },
                            elements: $(".thumbnailsBtn"),
                            pressedButtonClass: "enabledThumbnailsButton"
                        });
                    },
                    slideshowStop: function(){ $slideshowBtn.removeClass("slideshowBtn_on"); },
                    slideshowStart: function(){ $slideshowBtn.addClass("slideshowBtn_on"); }
                },
                handleThumbnailClick: false,
				selectedThumbnailClass: "selectedThumbnail",
                source: [{
                    url: "https://picasaweb.google.com/105098710956916751721/Trips",
                    thumbsize: 104,
                    cropThumbnails: false
                },
                {
                    url: "https://picasaweb.google.com/105098710956916751721/Plants",
                    thumbsize: 104,
                    cropThumbnails: false
                }],
                zoom: true,
                transform: true,
                transitionTime: 300
			});
            isInit = true;
		</script>
	</body>
</html>